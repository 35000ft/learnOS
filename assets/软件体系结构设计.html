<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; --title-bar-height:20px; }
.mac-os-11 { --title-bar-height:28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex:2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.42857rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left: 28px solid transparent; border-right: 28px solid transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right: 8px solid transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }


:root {
  --mermaid-theme: night;
}

[lang='mermaid'] .label {
  color: #333;
}

/* CSS Document */

/** code highlight */

.cm-s-inner .cm-variable,
.cm-s-inner .cm-operator,
.cm-s-inner .cm-property {
    color: #b8bfc6;
}

.cm-s-inner .cm-keyword {
    color: #C88FD0;
}

.cm-s-inner .cm-tag {
    color: #7DF46A;
}

.cm-s-inner .cm-attribute {
    color: #7575E4;
}

.CodeMirror div.CodeMirror-cursor {
    border-left: 1px solid #b8bfc6;
    z-index: 3;
}

.cm-s-inner .cm-string {
    color: #D26B6B;
}

.cm-s-inner .cm-comment,
.cm-s-inner.cm-comment {
    color: #DA924A;
}

.cm-s-inner .cm-header,
.cm-s-inner .cm-def,
.cm-s-inner.cm-header,
.cm-s-inner.cm-def {
    color: #8d8df0;
}

.cm-s-inner .cm-quote,
.cm-s-inner.cm-quote {
    color: #57ac57;
}

.cm-s-inner .cm-hr {
    color: #d8d5d5;
}

.cm-s-inner .cm-link {
    color: #d3d3ef;
}

.cm-s-inner .cm-negative {
    color: #d95050;
}

.cm-s-inner .cm-positive {
    color: #50e650;
}

.cm-s-inner .cm-string-2 {
    color: #f50;
}

.cm-s-inner .cm-meta,
.cm-s-inner .cm-qualifier {
    color: #b7b3b3;
}

.cm-s-inner .cm-builtin {
    color: #f3b3f8;
}

.cm-s-inner .cm-bracket {
    color: #997;
}

.cm-s-inner .cm-atom,
.cm-s-inner.cm-atom {
    color: #84B6CB;
}

.cm-s-inner .cm-number {
    color: #64AB8F;
}

.cm-s-inner .cm-variable {
    color: #b8bfc6;
}

.cm-s-inner .cm-variable-2 {
    color: #9FBAD5;
}

.cm-s-inner .cm-variable-3 {
    color: #1cc685;
}

.CodeMirror-selectedtext,
.CodeMirror-selected {
    background: #4a89dc;
    color: #fff !important;
    text-shadow: none;
}

.CodeMirror-gutters {
    border-right: none;
}

/* CSS Document */

/** markdown source **/
.cm-s-typora-default .cm-header, 
.cm-s-typora-default .cm-property
{
    color: #cebcca;
}

.CodeMirror.cm-s-typora-default div.CodeMirror-cursor{
    border-left: 3px solid #b8bfc6;
}

.cm-s-typora-default .cm-comment {
    color: #9FB1FF;
}

.cm-s-typora-default .cm-string {
    color: #A7A7D9
}

.cm-s-typora-default .cm-atom, .cm-s-typora-default .cm-number {
    color: #848695;
    font-style: italic;
}

.cm-s-typora-default .cm-link {
    color: #95B94B;
}

.cm-s-typora-default .CodeMirror-activeline-background {
    background: rgba(51, 51, 51, 0.72);
}

.cm-s-typora-default .cm-comment, .cm-s-typora-default .cm-code {
	color: #8aa1e1;
}@import "";
@import "";
@import "";

:root {
    --bg-color:  #363B40;
    --side-bar-bg-color: #2E3033;
    --text-color: #b8bfc6;

    --select-text-bg-color:#4a89dc;

    --item-hover-bg-color: #0a0d16;
    --control-text-color: #b7b7b7;
    --control-text-hover-color: #eee;
    --window-border: 1px solid #555;

    --active-file-bg-color: rgb(34, 34, 34);
    --active-file-border-color: #8d8df0;

    --primary-color: #a3d5fe;

    --active-file-text-color: white;
    --item-hover-bg-color: #70717d;
    --item-hover-text-color: white;
    --primary-color: #6dc1e7;

    --rawblock-edit-panel-bd: #333;

    --search-select-bg-color: #428bca;
}

html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
}

html,
body {
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    background: #363B40;
    background: var(--bg-color);
    fill: currentColor;
    line-height: 1.625rem;
}

#write {
    max-width: 914px;
}


@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

html,
body,
button,
input,
select,
textarea,
div.code-tooltip-content {
    color: #b8bfc6;
    border-color: transparent;
}

div.code-tooltip,
.md-hover-tip .md-arrow:after {
    background: #333;
}

.native-window #md-notification {
    border: 1px solid #70717d;
}

.popover.bottom > .arrow:after {
    border-bottom-color: #333;
}

html,
body,
button,
input,
select,
textarea {
    font-family: "Helvetica Neue", Helvetica, Arial, 'Segoe UI Emoji', sans-serif;
}

hr {
    height: 2px;
    border: 0;
    margin: 24px 0 !important;
}

h1,
h2,
h3,
h4,
h5,
h6 {
    font-family: "Lucida Grande", "Corbel", sans-serif;
    font-weight: normal;
    clear: both;
    -ms-word-wrap: break-word;
    word-wrap: break-word;
    margin: 0;
    padding: 0;
    color: #DEDEDE
}

h1 {
    font-size: 2.5rem;
    /* 36px */
    line-height: 2.75rem;
    /* 40px */
    margin-bottom: 1.5rem;
    /* 24px */
    letter-spacing: -1.5px;
}

h2 {
    font-size: 1.63rem;
    /* 24px */
    line-height: 1.875rem;
    /* 30px */
    margin-bottom: 1.5rem;
    /* 24px */
    letter-spacing: -1px;
    font-weight: bold;
}

h3 {
    font-size: 1.17rem;
    /* 18px */
    line-height: 1.5rem;
    /* 24px */
    margin-bottom: 1.5rem;
    /* 24px */
    letter-spacing: -1px;
    font-weight: bold;
}

h4 {
    font-size: 1.12rem;
    /* 16px */
    line-height: 1.375rem;
    /* 22px */
    margin-bottom: 1.5rem;
    /* 24px */
    color: white;
}

h5 {
    font-size: 0.97rem;
    /* 16px */
    line-height: 1.25rem;
    /* 22px */
    margin-bottom: 1.5rem;
    /* 24px */
    font-weight: bold;
}

h6 {
    font-size: 0.93rem;
    /* 16px */
    line-height: 1rem;
    /* 16px */
    margin-bottom: 0.75rem;
    color: white;
}

@media (min-width: 980px) {
    h3.md-focus:before,
    h4.md-focus:before,
    h5.md-focus:before,
    h6.md-focus:before {
        color: #ddd;
        border: 1px solid #ddd;
        border-radius: 3px;
        position: absolute;
        left: -1.642857143rem;
        top: .357142857rem;
        float: left;
        font-size: 9px;
        padding-left: 2px;
        padding-right: 2px;
        vertical-align: bottom;
        font-weight: normal;
        line-height: normal;
    }

    h3.md-focus:before {
        content: 'h3';
    }

    h4.md-focus:before {
        content: 'h4';
    }

    h5.md-focus:before {
        content: 'h5';
        top: 0px;
    }

    h6.md-focus:before {
        content: 'h6';
        top: 0px;
    }
}

a {
    text-decoration: none;
    outline: 0;
}

a:hover {
    outline: 0;
}

a:focus {
    outline: thin dotted;
}

sup.md-footnote {
    background-color: #555;
    color: #ddd;
}

p {
    -ms-word-wrap: break-word;
    word-wrap: break-word;
}

p,
ul,
dd,
ol,
hr,
address,
pre,
table,
iframe,
.wp-caption,
.wp-audio-shortcode,
.wp-video-shortcode {
    margin-top: 0;
    margin-bottom: 1.5rem;
    /* 24px */
}

audio:not([controls]) {
    display: none;
}

[hidden] {
    display: none;
}

::-moz-selection {
    background: #4a89dc;
    color: #fff;
    text-shadow: none;
}

*.in-text-selection,
::selection {
    background: #4a89dc;
    color: #fff;
    text-shadow: none;
}

ul,
ol {
    padding: 0 0 0 1.875rem;
    /* 30px */
}

ul {
    list-style: square;
}

ol {
    list-style: decimal;
}

ul ul,
ol ol,
ul ol,
ol ul {
    margin: 0;
}

b,
th,
dt,
strong {
    font-weight: bold;
}

i,
em,
dfn,
cite {
    font-style: italic;
}

blockquote {
    padding-left: 1.875rem;
    margin: 0 0 1.875rem 1.875rem;
    border-left: solid 2px #474d54;
    padding-left: 30px;
    margin-top: 35px;
}

pre,
code,
kbd,
tt,
var {
    font-size: 0.875em;
    font-family: Monaco, Consolas, "Andale Mono", "DejaVu Sans Mono", monospace;
}

code,
tt,
var {
    background: rgba(0, 0, 0, 0.05);
}

kbd {
    padding: 2px 4px;
    font-size: 90%;
    color: #fff;
    background-color: #333;
    border-radius: 3px;
    box-shadow: inset 0 -1px 0 rgba(0,0,0,.25);
}

pre.md-fences {
    padding: 10px 10px 10px 30px;
    margin-bottom: 20px;
    background: #333;
}

.CodeMirror-gutters {
    background: #333;
    border-right: 1px solid transparent;
}

.enable-diagrams pre.md-fences[lang="sequence"] .code-tooltip,
.enable-diagrams pre.md-fences[lang="flow"] .code-tooltip,
.enable-diagrams pre.md-fences[lang="mermaid"] .code-tooltip {
    bottom: -2.2em;
    right: 4px;
}

code,
kbd,
tt,
var {
    padding: 2px 5px;
}

table {
    max-width: 100%;
    width: 100%;
    border-collapse: collapse;
    border-spacing: 0;
}

th,
td {
    padding: 5px 10px;
    vertical-align: top;
}

a {
    -webkit-transition: all .2s ease-in-out;
    transition: all .2s ease-in-out;
}

hr {
    background: #474d54;
    /* variable */
}

h1 {
    margin-top: 2em;
}

a {
    color: #e0e0e0;
    text-decoration: underline;
}

a:hover {
    color: #fff;
}

.md-inline-math script {
    color: #81b1db;
}

b,
th,
dt,
strong {
    color: #DEDEDE;
    /* variable */
}

mark {
    background: #D3D40E;
}

blockquote {
    color: #9DA2A6;
}

table a {
    color: #DEDEDE;
    /* variable */
}

th,
td {
    border: solid 1px #474d54;
    /* variable */
}

.task-list {
    padding-left: 0;
}

.md-task-list-item {
    padding-left: 1.25rem;
}

.md-task-list-item > input {
    top: auto;
}

.md-task-list-item > input:before {
    content: "";
    display: inline-block;
    width: 0.875rem;
    height: 0.875rem;
    vertical-align: middle;
    text-align: center;
    border: 1px solid #b8bfc6;
    background-color: #363B40;
    margin-top: -0.4rem;
}

.md-task-list-item > input:checked:before,
.md-task-list-item > input[checked]:before {
    content: '\221A';
    /*◘*/
    font-size: 0.625rem;
    line-height: 0.625rem;
    color: #DEDEDE;
}

/** quick open **/
.auto-suggest-container {
    border: 0px;
    background-color: #525C65;
}

#typora-quick-open {
    background-color: #525C65;
}

#typora-quick-open input{
    background-color: #525C65;
    border: 0;
    border-bottom: 1px solid grey;
}

.typora-quick-open-item {
    background-color: inherit;
    color: inherit;
}

.typora-quick-open-item.active,
.typora-quick-open-item:hover {
    background-color: #4D8BDB;
    color: white;
}

.typora-quick-open-item:hover {
    background-color: rgba(77, 139, 219, 0.8);
}

.typora-search-spinner > div {
  background-color: #fff;
}

#write pre.md-meta-block {
    border-bottom: 1px dashed #ccc;
    background: transparent;
    padding-bottom: 0.6em;
    line-height: 1.6em;
}

.btn,
.btn .btn-default {
    background: transparent;
    color: #b8bfc6;
}

.ty-table-edit {
    border-top: 1px solid gray;
    background-color: #363B40;
}

.popover-title {
    background: transparent;
}

.md-image>.md-meta {
    color: #BBBBBB;
    background: transparent;
}

.md-expand.md-image>.md-meta {
    color: #DDD;
}

#write>h3:before,
#write>h4:before,
#write>h5:before,
#write>h6:before {
    border: none;
    border-radius: 0px;
    color: #888;
    text-decoration: underline;
    left: -1.4rem;
    top: 0.2rem;
}

#write>h3.md-focus:before {
    top: 2px;
}

#write>h4.md-focus:before {
    top: 2px;
}

.md-toc-item {
    color: #A8C2DC;
}

#write div.md-toc-tooltip {
    background-color: #363B40;
}

.dropdown-menu .btn:hover,
.dropdown-menu .btn:focus,
.md-toc .btn:hover,
.md-toc .btn:focus {
    color: white;
    background: black;
}

#toc-dropmenu {
    background: rgba(50, 54, 59, 0.93);
    border: 1px solid rgba(253, 253, 253, 0.15);
}

#toc-dropmenu .divider {
    background-color: #9b9b9b;
}

.outline-expander:before {
    top: 2px;
}

#typora-sidebar {
    box-shadow: none;
    border-right: 1px dashed;
    border-right: none;
}

.sidebar-tabs {
    border-bottom:0;
}

#typora-sidebar:hover .outline-title-wrapper {
    border-left: 1px dashed;
}

.outline-title-wrapper .btn {
    color: inherit;
}

.outline-item:hover {
    border-color: #363B40;
    background-color: #363B40;
    color: white;
}

h1.md-focus .md-attr,
h2.md-focus .md-attr,
h3.md-focus .md-attr,
h4.md-focus .md-attr,
h5.md-focus .md-attr,
h6.md-focus .md-attr,
.md-header-span .md-attr {
    color: #8C8E92;
    display: inline;
}

.md-comment {
    color: #5a95e3;
    opacity: 0.8;
}

.md-inline-math svg {
    color: #b8bfc6;
}

#math-inline-preview .md-arrow:after {
    background: black;
}

.modal-content {
    background: var(--bg-color);
    border: 0;
}

.modal-title {
    font-size: 1.5em;
}

.modal-content input {
    background-color: rgba(26, 21, 21, 0.51);
    color: white;
}

.modal-content .input-group-addon {
    color: white;
}

.modal-backdrop {
    background-color: rgba(174, 174, 174, 0.7);
}

.modal-content .btn-primary {
    border-color: var(--primary-color);
}

.md-table-resize-popover {
    background-color: #333;
}

.form-inline .input-group .input-group-addon {
    color: white;
}

#md-searchpanel {
    border-bottom: 1px dashed grey;
}

/** UI for electron */

.context-menu,
#spell-check-panel,
#footer-word-count-info {
    background-color: #42464A;
}

.context-menu.dropdown-menu .divider,
.dropdown-menu .divider {
    background-color: #777777;
    opacity: 1;
}

footer {
    color: inherit;
}

@media (max-width: 1000px) {
    footer {
        border-top: none;
    }
    footer:hover {
        color: inherit;
    }
}

#file-info-file-path .file-info-field-value:hover {
    background-color: #555;
    color: #dedede;
}

.megamenu-content,
.megamenu-opened header {
    background: var(--bg-color);
}

.megamenu-menu-panel h2,
.megamenu-menu-panel h1,
.long-btn {
    color: inherit;
}

.megamenu-menu-panel input[type='text'] {
    background: inherit;
    border: 0;
    border-bottom: 1px solid;
}

#recent-file-panel-action-btn {
    background: inherit;
    border: 1px grey solid;
}

.megamenu-menu-panel .dropdown-menu > li > a {
    color: inherit;
    background-color: #2F353A;
    text-decoration: none;
}

.megamenu-menu-panel table td:nth-child(1) {
    color: inherit;
    font-weight: bold;
}

.megamenu-menu-panel tbody tr:hover td:nth-child(1) {
    color: white;
}

.modal-footer .btn-default, 
.modal-footer .btn-primary,
.modal-footer .btn-default:not(:hover) {
    border: 1px solid;
    border-color: transparent;
}

.btn-primary {
    color: white;
}

.btn-default:hover, .btn-default:focus, .btn-default.focus, .btn-default:active, .btn-default.active, .open > .dropdown-toggle.btn-default {
    color: white;
    border: 1px solid #ddd;
    background-color: inherit;
}

.modal-header {
    border-bottom: 0;
}

.modal-footer {
    border-top: 0;
}

#recent-file-panel tbody tr:nth-child(2n-1) {
    background-color: transparent !important;
}

.megamenu-menu-panel tbody tr:hover td:nth-child(2) {
    color: inherit;
}

.megamenu-menu-panel .btn {
    border: 1px solid #eee;
    background: transparent;
}

.mouse-hover .toolbar-icon.btn:hover,
#w-full.mouse-hover,
#w-pin.mouse-hover {
    background-color: inherit;
}

.typora-node::-webkit-scrollbar {
    width: 5px;
}

.typora-node::-webkit-scrollbar-thumb:vertical {
    background: rgba(250, 250, 250, 0.3);
}

.typora-node::-webkit-scrollbar-thumb:vertical:active {
    background: rgba(250, 250, 250, 0.5);
}

#w-unpin {
    background-color: #4182c4;
}

#top-titlebar, #top-titlebar * {
    color: var(--item-hover-text-color);
}

.typora-sourceview-on #toggle-sourceview-btn,
#footer-word-count:hover,
.ty-show-word-count #footer-word-count {
    background: #333333;
}

#toggle-sourceview-btn:hover {
    color: #eee;
    background: #333333;
}

/** focus mode */
.on-focus-mode .md-end-block:not(.md-focus):not(.md-focus-container) * {
    color: #686868 !important;
}

.on-focus-mode .md-end-block:not(.md-focus) img,
.on-focus-mode .md-task-list-item:not(.md-focus-container)>input {
    opacity: #686868 !important;
}

.on-focus-mode li[cid]:not(.md-focus-container){
    color: #686868;
}

.on-focus-mode .md-fences.md-focus .CodeMirror-code>*:not(.CodeMirror-activeline) *,
.on-focus-mode .CodeMirror.cm-s-inner:not(.CodeMirror-focused) * {
    color: #686868 !important;
}

.on-focus-mode .md-focus,
.on-focus-mode .md-focus-container {
    color: #fff;
}

.on-focus-mode #typora-source .CodeMirror-code>*:not(.CodeMirror-activeline) * {
    color: #686868 !important;
}


/*diagrams*/
#write .md-focus .md-diagram-panel {
    border: 1px solid #ddd;
    margin-left: -1px;
    width: calc(100% + 2px);
}

/*diagrams*/
#write .md-focus.md-fences-with-lineno .md-diagram-panel {
    margin-left: auto;
}

.md-diagram-panel-error {
    color: #f1908e;
}

.active-tab-files #info-panel-tab-file,
.active-tab-files #info-panel-tab-file:hover,
.active-tab-outline #info-panel-tab-outline,
.active-tab-outline #info-panel-tab-outline:hover {
    color: #eee;
}

.sidebar-footer-item:hover,
.footer-item:hover {
    background: inherit;
    color: white;
}

.ty-side-sort-btn.active,
.ty-side-sort-btn:hover,
.selected-folder-menu-item a:after {
    color: white;
}

#sidebar-files-menu {
    border:solid 1px;
    box-shadow: 4px 4px 20px rgba(0, 0, 0, 0.79);
    background-color: var(--bg-color);
}

.file-list-item {
    border-bottom:none;
}

.file-list-item-summary {
    opacity: 1;
}

.file-list-item.active:first-child {
    border-top: none;
}

.file-node-background {
    height: 32px;
}

.file-library-node.active>.file-node-content,
.file-list-item.active {
    color: white;
    color: var(--active-file-text-color);
}

.file-library-node.active>.file-node-background{
    background-color: rgb(34, 34, 34);
    background-color: var(--active-file-bg-color);
}
.file-list-item.active {
    background-color: rgb(34, 34, 34);
    background-color: var(--active-file-bg-color);
}

#ty-tooltip {
    background-color: black;
    color: #eee;
}

.md-task-list-item>input {
    margin-left: -1.3em;
    margin-top: 0.3rem;
    -webkit-appearance: none;
}

.md-mathjax-midline {
    background-color: #57616b;
    border-bottom: none;
}

footer.ty-footer {
    border-color: #656565;
}

.ty-preferences .btn-default {
    background: transparent;
}
.ty-preferences .btn-default:hover {
    background: #57616b;
}

.ty-preferences select {
    border: 1px solid #989698;
    height: 21px;
}

.ty-preferences .nav-group-item.active,
.export-item.active,
.export-items-list-control,
.export-detail {
    background: var(--item-hover-bg-color);
}

.ty-preferences input[type="search"] {
    border-color: #333;
    background: #333;
    line-height: 22px;
    border-radius: 6px;
    color: white;
}

.ty-preferences input[type="search"]:focus {
    box-shadow: none;
}

[data-is-directory="true"] .file-node-content {
    margin-bottom: 0;
}

.file-node-title {
    line-height: 22px;
}

.html-for-mac .file-node-open-state, .html-for-mac .file-node-icon {
    line-height: 26px;
}

::-webkit-scrollbar-thumb {
    background: rgba(230, 230, 230, 0.30);
}

::-webkit-scrollbar-thumb:active {
    background: rgba(230, 230, 230, 0.50);
}

#typora-sidebar:hover div.sidebar-content-content::-webkit-scrollbar-thumb:horizontal {
    background: rgba(230, 230, 230, 0.30);
}

.nav-group-item:active {
    background-color: #474d54 !important;
}

.md-search-hit {
    background: rgba(199, 140, 60, 0.81);
    color: #eee;
}

.md-search-hit * {
    color: #eee;
}

#md-searchpanel input {
    color: white;
}

.modal-backdrop.in {
    opacity: 1;
    backdrop-filter: blur(1px);
}

.clear-btn-icon {
    top: 8px;
}


</style><title>软件体系结构设计</title>
</head>
<body class='typora-export os-windows'><div class='typora-export-content'>
<div id='write'  class=''><h1 id='1system-design'><span>1.System Design</span></h1><p><span>目标：</span></p><ol start='' ><li><span>To understand why need design</span></li><li><span>To know how to elicit design goals</span></li><li><span>To know how to specify design output</span></li><li><span>To know how to decompose a system</span></li></ol><h2 id='11-introduction'><span>1.1 Introduction</span></h2><h3 id='111-why-is-design-so-difficult'><span>1.1.1 Why is Design so Difficult?</span></h3><ul><li><span>The solution domain is changing very rapidly </span></li><li><span>Design knowledge is a moving target</span></li></ul><h3 id='121-analysis-result-and-system-design-result'><span>1.2.1 Analysis Result and System Design Result</span></h3><p><span>We already have</span></p><p><strong><span>Analysis result:</span></strong></p><ul><li><span>A set of </span><strong><span>nonfunctional</span></strong><span> </span><strong><span>requirements</span></strong><span> and </span><strong><span>constraints</span></strong><span>, such as maximum response time, minimum throughput, reliability, operating system platform, and so on</span></li><li><span>A </span><strong><span>functional</span></strong><span> </span><strong><span>model</span></strong><span>, describing the system functionality from the actors’ point of view</span></li><li><span>An </span><strong><span>structural</span></strong><span> m</span><strong><span>o</span></strong><span>del, describing the entities manipulated by the system</span></li><li><strong><span>Behavioral</span></strong><span> </span><strong><span>models</span></strong><span> for each use case, showing the sequence of interactions among objects participating in the use case.</span></li></ul><p>&nbsp;</p><p><span>We need to have</span></p><p><strong><span>System design results:</span></strong></p><ul><li><strong><span>Design goals</span></strong><span>, describing the qualities of the system that developers should optimize</span></li><li><strong><span>Software architecture</span></strong><span>, describing the subsystem decomposition in terms of subsystem responsibilities, dependencies among subsystems, subsystem mapping to hardware, and major policy decisions such as control flow, access control, and data storage </span></li><li><strong><span>Boundary use cases</span></strong><span>, describing the system configuration, startup, shutdown, and exception handling issues.</span></li></ul><p>&nbsp;</p><h2 id='12-identify-design-goals'><span>1.2 Identify Design Goals</span></h2><p><span>Where can we get design goals?</span></p><ul><li><strong><span>Nonfunctional Requirements</span></strong></li></ul><h3 id='121-design-criteria'><span>1.2.1 Design Criteria</span></h3><p><span>Different stakeholders may have </span><strong><span>different design goals</span></strong><span>:</span></p><ul><li><span>For the client, </span><strong><span>Low cost</span></strong><span>, Increased productivity, Backward compatibility, </span><strong><span>Traceability of requirements</span></strong><span>, Rapid development, Flexibility, Runtime Efficiency, </span><strong><span>Reliablity</span></strong><span> are the important design goals. </span></li><li><span>For the end user, Functionality, </span><strong><span>User-friendliness</span></strong><span>, </span><strong><span>Usability</span></strong><span>, Ease of learning, Fault tolerant, Robustness, Runtime Efficiency, Portability, Good documentation, Reliablity are the important design goals. </span></li><li><span>For the developer or maintainer, Minimum of errors, </span><strong><span>Modifiability</span></strong><span>, Readability, </span><strong><span>Reusability</span></strong><span>, </span><strong><span>Adaptability</span></strong><span>, Well-defined interfaces, </span><strong><span>Portability</span></strong><span>, Good documentation, Reliablity are the important design goals.</span></li></ul><p><span>1.Performance criteria</span></p><p><span>Performance criteria include the </span><strong><span>speed and space requirements imposed on the system.</span></strong><span>   </span></p><ul><li><span>Should the system be responsive, or should it accomplish a maximum number of tasks?   </span></li><li><span>Is memory space available for speed optimizations, or should memory be used sparingly?</span></li></ul><p><span>2.Dependability criteria</span></p><p><strong><span>Dependability criteria determine how much effort should be expended in minimizing system crashes and their consequences.</span></strong><span>  </span></p><ul><li><span>How often can the system crash? </span></li><li><span>How available to the user should the system be?  </span></li><li><span>Should the system tolerate errors and failures?  </span></li><li><span>Are security risks associated with the system environment?  </span></li><li><span>Are safety issues  associated with system crashes?</span></li></ul><p><span>3.Cost criteria</span></p><p><strong><span>Cost criteria include the cost to develop the system, to deploy it, and to administer it.</span></strong><span>  </span></p><ul><li><span>成本标准不仅包括设计考虑因素，还包括管理考虑因素。</span></li><li><span>当系统替换旧系统时，必须考虑确保向后兼容性或过渡到新系统的成本。</span></li><li><span>在不同类型的成本之间也存在权衡，例如开发成本、最终用户培训成本、转换成本和维护成本。</span></li><li><span>保持与以前系统的向后兼容性可以增加开发成本，同时减少转换成本。</span></li><li><span>Note that cost criteria not only include design considerations but managerial ones, as well.  </span></li><li><span>When the system is replacing an older one, the cost of ensuring backward compatibility or transitioning to the new system has to be taken into account.  </span></li><li><span>There are also trade-offs between different types of costs such as development cost, end user training cost, transition costs, and maintenance costs.  </span></li><li><span>Maintaining backward compatibility with a previous system can add to the development cost while reducing the transition cost.</span></li></ul><p><span>4.Maintenance criteria</span></p><p><strong><span>Maintenance</span></strong><span> </span><strong><span>criteria</span></strong><span> determine </span><strong><span>how difficult it is to change the system after deployment.</span></strong><span> </span></p><ul><li><span>添加新功能有多容易?</span></li><li><span>修改现有功能有多容易?</span></li><li><span>系统能否适应不同的应用领域?</span></li><li><span>将系统移植到不同的平台需要多少努力?</span></li><li><span>这些标准很难优化和计划，因为很少清楚项目将如何成功，以及系统将运行多长时间。</span></li><li><span>How easily can new functionality be added? </span></li><li><span>How easily can existing functions be revised? </span></li><li><span>Can the system be adapted to a different application domain? </span></li><li><span>How much effort will be required to port the system to a different platform? </span></li><li><span>These criteria are harder to optimize and plan for, as it is seldom clear how successful the project will be and how long the system will be operational.</span></li></ul><p><span>5.End user criteria</span></p><p><strong><span>End</span></strong><span> </span><strong><span>user</span></strong><span> </span><strong><span>criteria</span></strong><span> include </span><strong><span>qualities that are desirable from a users’ point of view, but have not yet been covered under the performance and dependability criteria.</span></strong><span> </span></p><ul><li><span>软件是否难于使用和学习?</span></li><li><span>用户能否在系统上完成所需的任务?</span></li><li><span>Is the software difficult to use and to learn? </span></li><li><span>Can the users accomplish needed tasks on the system? </span></li></ul><p><span>6.Design goal trade off </span></p><p><strong><span>设计目标的权衡</span></strong></p><h3 id='122---robustness-鲁棒性健壮性'><span>1.2.2   Robustness 鲁棒性/健壮性</span></h3><p><span>We hava talked about many kinds of design goals, among them, most important design goals mainly include:</span></p><ul><li><strong><span>Correctness:</span></strong><span> it means that the design meets the requirements and the code is executed according to the requirements. Generally, there may be multiple correct designs for a given requirement.</span></li><li><strong><span>Robustness:</span></strong><span> if the application can execute in case of errors, the design is robust.</span></li><li><strong><span>Reusability:</span></strong><span> refers to the code of the system that can be easily reused in the development of other systems.</span></li><li><strong><span>Maintainability:</span></strong><span> a maintainability design means that it can be easily modified.</span></li><li><strong><span>Efficiency:</span></strong><span> it includes time efficiency and space efficiency.</span></li></ul><h3 id='123-reusability'><span>1.2.3 Reusability</span></h3><p><span>Reusability means that </span><strong><span>the components of a software can be reused in different places of the same project or even in another project.</span></strong><span>   One way to reduce costs and maximize productivity is to use the original work, that is, reuse. </span></p><p><span>提高可重用性的方法：</span></p><ul><li><h3 id='use-inheritance-to-reuse'><span>Use inheritance to reuse. </span></h3></li><li><p><strong><span>Use aggregation/composition to reuse.</span></strong></p></li><li><p><strong><span>Use dependency to reuse</span></strong><span>. </span></p><p><span>The difference between </span><strong><span>dependency and aggregation</span></strong><span> is that the </span><strong><span>dependent object is not its own member</span></strong><span>, but by passing object parameters or creating an object in the method, and then reusing its members.</span></p></li></ul><h3 id='124-maintainability'><span>1.2.4 Maintainability</span></h3><p><span>需要考虑可维护性的原因：</span></p><p><span>The requirements change when the application has been completed</span></p><p><span>需求的变化主要体现在以下几个方面，可维护性也体现在这些方面:</span></p><ol start='' ><li><span>Add more functions of the same type. For example, in banking applications, more types of accounts can be processed without changing the existing design and modifying the existing code. </span></li><li><span>Add new functions, such as adding withdrawal function to the existing deposit function. </span></li><li><span>Modify functions, such as overdraft withdrawal. For example, a calculator program realizes the basic addition operation.  If the calculation code is mixed with other parts, such as the code for obtaining user input and output, there may be more changes when the requirements change in the future. </span></li></ol><h3 id='125--efficiency'><span>1.2.5  Efficiency</span></h3><p><span>The goal of efficiency is to </span><strong><span>use the available memory to complete the work as soon as possible.</span></strong><span>  Efficiency is considered from both </span><strong><span>time and space.</span></strong><span>  In practice, they usually </span><strong><span>restrict each other</span></strong><span> and need time-space compromise.</span></p><ol start='' ><li><p><span>Design efficiency</span></p><p><span>在简单性方面，使用方便的工具和语言将节省大量的设计时间，但程序员也失去了对这个系统的时间和空间的控制。</span></p><p><span>In terms of simplicity, using </span><strong><span>convenient tools and languages</span></strong><span> will save a lot of design time, but programmers also lose control of the time and space of this system. </span></p></li><li><p><span>Implementation efficiency</span></p><p><span>执行效率是指应用程序必须在指定的时间内完成特定的功能。</span></p><p><span>Execution efficiency means that the application must complete specific functions within a specified time.  </span></p></li><li><p><span>Storage efficiency</span></p><p><span>Storage efficiency is an important evaluation index for some applications that have certain requirements for memory capacity or hard disk space. </span></p><p><span>提高存储效率的方法：</span></p><p><span>①只存储需要的数据，这需要在存储效率和数据提取和重组时间之间做出妥协。</span></p><p><span>②压缩数据，需要在存储效率和数据压缩解压时间之间做出折衷。</span></p><p><span>③根据相关的访问频率存储数据，这需要在存储效率和时间之间进行折衷，以确定存储位置。</span></p><p><span>①</span><span>	</span><span>Only the required data is stored.</span></p><p><span>②</span><span>	</span><span>Compress data. </span></p><p><span>③</span><span>	</span><span>Store data according to the relevant access frequency.</span></p></li></ol><p>&nbsp;</p><h2 id='13-package-diagrams'><span>1.3 Package Diagrams</span></h2><p><span>定义： </span><strong><span>Package diagram</span></strong><span> is a kind of structural diagram, which </span><strong><span>shows the arrangement and organization of model elements</span></strong><span> in middle to large scale project. </span></p><p><span>作用：</span></p><ul><li><span>包图可以用来简化复杂的类图，它可以将类分组到包中。</span></li><li><span>包是逻辑上相关的UML元素的集合。</span></li><li><span>包被描述为文件夹，可以在任何UML图上使用。</span></li><li><span>Package Diagram can be used to </span><strong><span>simplify complex class diagrams</span></strong><span>, it can group classes into packages.</span></li><li><span>A package is </span><strong><span>a collection of logically related UML elements</span></strong><span>.</span></li><li><span>Packages are depicted as file folders and can be used on any of the UML diagrams.</span></li></ul><h2 id='14-component-diagram'><span>1.4 Component Diagram</span></h2><p><span>定义：</span></p><ul><li><span>UML组件图用于对面向对象系统的物理方面进行建模，这些面向对象系统用于可视化、指定和记录基于组件的系统，也用于通过正向和反向工程构造可执行系统。</span></li><li><span>组件图本质上是关注系统组件的类图，这些组件通常用于对系统的静态实现视图建模。</span></li><li><span>UML Component diagrams are used in </span><strong><span>modeling the physical aspects of object-oriented systems</span></strong><span> that are used for visualizing, specifying, and documenting component-based systems and also for </span><strong><span>constructing executable systems</span></strong><span> through forward and reverse engineering. </span></li><li><span>Component diagrams are essentially class diagrams that focus on a system&#39;s components that often used to model the static implementation view of a system.</span></li></ul><p>&nbsp;</p><h2 id='15-system-decomposition'><span>1.5 System Decomposition</span></h2><h3 id='151-subsystem定义'><span>1.5.1 </span><strong><span>Subsystem</span></strong><span>定义：</span></h3><p><span>A </span><strong><span>subsystem</span></strong><span> is a grouping of model elements that are part of the overall system. </span></p><p>&nbsp;</p><h3 id='152-component-vs-subsystem-vs-package'><strong><span>1.5.2 Component vs Subsystem vs Package</span></strong></h3><ul><li><span>Component is a </span><strong><span>physical component</span></strong><span> that follows a set of interfaces and provides implementation in the system.</span></li><li><span>A subsystem is a </span><strong><span>component</span></strong><span>, usually </span><strong><span>including many smaller components</span></strong><span>, which is a large component.</span></li><li><span>A package is a </span><strong><span>grouping of elements</span></strong><span>, which forms a higher-level unit logically. Used to group classes. </span></li></ul><p>&nbsp;</p><h3 id='153--design-method'><span>1.5.3  Design Method</span></h3><ul><li><p><span>Top-down method</span></p><p><span>在自顶向下设计中，您从系统的非常高级的结构开始。然后，您将逐步深入到关于低级构造的详细决策。在自顶向下设计中首先处理的高级问题的例子包括将使用的软件体系结构和数据库类型。</span></p></li><li><p><span>Bottom-up methods</span></p><p><span>自底向上设计，涉及到首先对可重用的低级实用程序做出决策，然后决定如何将这些实用程序组合在一起以创建高级构造。</span></p></li><li><p><span>Mixed methods</span></p><p><span>通常使用自顶向下和自底向上的混合设计。自上而下的设计几乎总是需要给系统一个良好的结构。另一方面，一些自底向上的设计有助于确保您创建可在整个系统的多个位置使用的可重用组件。</span></p></li></ul><h2 id='16-system-design-principles'><span>1.6 System Design Principles</span></h2><h3 id='161-divide-and-conquer'><span>1.6.1 Divide and Conquer</span></h3><p><span>Trying to deal with something big all at once is normally much harder than dealing with a series of smaller things. </span></p><p><strong><span>Dividing a software system into pieces has many advantages:</span></strong><span> </span></p><ol start='' ><li><p><span>每个部分可以由不同的人负责。</span></p><p><span>Separate people can work on each part.</span></p></li><li><p><span>原来的开发工作可以并行进行。</span></p><p><span>The original development work can therefore be done in parallel.</span></p></li><li><p><span>一个软件工程师可以专攻他或她的组件，成为该组件的专家。</span></p><p><span>An individual software engineer can specialize in his or her component, becoming expert at it.</span></p></li><li><p><span>有人可能知道系统的一小部分的所有信息，但不可能知道整个系统的所有信息。</span></p><p><span>It is possible for someone to know everything about a small part of a system, but it is not possible to know everything about an entire system.</span></p></li><li><p><span>每个单独的组件都更小，因此更容易理解。</span></p><p><span>Each individual component is smaller, and therefore easier to understand.</span></p></li><li><p><span>当一个部件需要更换或更改时，希望可以在不更换或大量更改其他部件的情况下完成。</span></p><p><span>When one part needs to be replaced or changed, this can hopefully be done without having to replace or extensively change other parts.</span></p></li><li><p><span>出现了使组件可重用的机会。</span></p><p><span>Opportunities arise for making the components reusable.</span></p></li></ol><p>&nbsp;</p><h3 id='162-high-cohesion'><span>1.6.2 High Cohesion</span></h3><p><strong><span>内聚的概念：</span></strong></p><p><span>凝聚力说的是要聪明地去做:是的，把东西分开，但把属于一起的东西放在一起。</span></p><p><span>一个子系统或模块具有很高的内聚性，如果它将彼此相关的东西放在一起，并将其他东西排除在外。这使得整个系统更容易理解和更改。</span></p><ul><li><span>Cohesion says to do it intelligently: </span><strong><span>divide things up, but keep things together that belong together.</span></strong><span> </span></li><li><span>A subsystem or module has high cohesion if it </span><strong><span>keeps together things that are related to each other</span></strong><span>, </span><strong><span>and keeps out other things</span></strong><span>.  This makes the system as a whole easier to understand and change.</span></li></ul><p><span>内聚的种类：（内聚程度从高到低）</span></p><ul><li><h3 id='functional-cohesion'><span>Functional cohesion</span></h3></li><li><h3 id='layer-cohesion'><span>Layer cohesion</span></h3></li><li><h3 id='communicational-cohesion'><span>Communicational cohesion</span></h3></li><li><h3 id='sequential-cohesion'><span>Sequential cohesion</span></h3></li><li><h3 id='procedural-cohesion'><span>Procedural cohesion</span></h3></li><li><h3 id='temporal-cohesion'><span>Temporal cohesion</span></h3></li><li><h3 id='utility-cohesion'><span>Utility cohesion</span></h3></li></ul><p>&nbsp;</p><h3 id='163--low-coupling'><span>1.6.3  Low Coupling</span></h3><p><strong><span>耦合的定义：</span></strong></p><p><span>Coupling occurs </span><strong><span>when there are interdependencies</span></strong><span> between one module and another. </span></p><p><span>当一个模块和另一个模块之间存在相互依赖时，就会发生耦合。</span></p><p><strong><span>耦合带来的坏处：</span></strong></p><ul><li><p><span>In general, the more tightly coupled a set of modules is, the harder it is to understand and, hence, change the system.  </span></p><p><span>原因：</span></p><p><span>When interdependencies exist, changes in one place will require changes somewhere else, which is likely that errors will be made.</span></p><p><span>A network of interdependencies makes it hard to see at a glance how some component works.</span></p></li><li><p><span>Additionally, coupling implies that if you want to reuse one module, you will also have to import those with which it is coupled. </span></p><p><span>原因：</span></p><p><span>The coupled components need each other in order to work properly.</span></p></li></ul><p><strong><span>耦合的类型（耦合程度由高到低）：</span></strong></p><figure><table><thead><tr><th><strong><span>Coupling type</span></strong></th><th><strong><span>Comments</span></strong></th></tr></thead><tbody><tr><td><strong><span>Content</span></strong></td><td><span>A component surreptitiously </span><strong><span>modifying internal data</span></strong><span> of another component. Always avoid this.</span></td></tr><tr><td><strong><span>Common</span></strong></td><td><span>The use of </span><strong><span>global variables</span></strong><span>. Severely restrict this.</span></td></tr><tr><td><strong><span>Control</span></strong></td><td><span>One procedure </span><strong><span>directly controlling another</span></strong><span> using a flag. Reduce this using polymorphism.</span></td></tr><tr><td><strong><span>Stamp</span></strong></td><td><span>One of the argument types of a method is one of your application classes. If it simplifies the system, replace each  such argument with a simpler argument (an interface, a superclass or a few  simple data items).</span></td></tr><tr><td><strong><span>Data</span></strong></td><td><span>The use of method arguments that are simple data. If possible, reduce the number of arguments.</span></td></tr><tr><td><strong><span>Routine call</span></strong></td><td><span>A routine calling another. Reduce the  total number of separate calls by encapsulating repeated sequences.</span></td></tr><tr><td><strong><span>Type use</span></strong></td><td><span>The use of a globally defined data  type. Use simpler types where possible (super classes or interfaces).</span></td></tr><tr><td><strong><span>Inclusion/import</span></strong></td><td><span>Including a file or importing a  package. Eliminate when not necessary.</span></td></tr><tr><td><strong><span>External</span></strong></td><td><span>A dependency exists to elements  outside the scope of the system, such as the operating system, shared  libraries or the hardware. Reduce the total number of places that have dependencies  on such external elements.</span></td></tr></tbody></table></figure><p>&nbsp;</p><h3 id='164--high-abstraction'><span>1.6.4  High Abstraction</span></h3><ul><li><span>您应该确保您的设计允许您隐藏或推迟对细节的考虑，从而降低复杂性。</span></li><li><span>抽象是必要的，因为人脑在同一时间只能处理有限数量的信息。</span></li><li><span>You should ensure that your designs allow you to hide or defer consideration of details, thus reducing complexity.</span></li><li><span>Abstractions are needed because the human brain can process only a limited amount of information at any one time.</span></li></ul><h3 id='165--increase-reusability'><span>1.6.5  Increase Reusability</span></h3><p><span>Designing for reusability means designing various aspects of your system so that they can be used again in other contexts, both in your system and in other systems. </span></p><h3 id='166--reuse-existing-designs-and-code'><span>1.6.6  Reuse existing designs and code</span></h3><p><span>Take advantage of the investment you or others have made in reusable components.</span></p><p><span>一般来说，克隆一行代码是可以接受的;然而，每当您想要克隆几行以上的代码时，通常最好将代码封装在一个单独的方法中，并从所有需要它的地方调用它</span></p><h3 id='167-design-for-flexibility'><span>1.6.7 Design for flexibility</span></h3><h3 id='68-anticipate-obsolescence'><span>6.8 Anticipate obsolescence</span></h3><h3 id='169-design-for-portability'><span>1.6.9 Design for portability</span></h3><p><span>An important guideline for achieving portability is to avoid the use of facilities that are specific to one particular environment.</span></p><h3 id='1610-design-for-testability'><span>1.6.10 Design for testability</span></h3><p><span>可测试性设计是为了确保代码的所有功能都可以在不通过图形用户界面的情况下执行。</span></p><p><span>Design for testability is to ensure that all the functionality of the code can be executed without going through the graphical user interface.</span></p><h3 id='1611--design-defensively'><span>1.6.11  Design defensively</span></h3><h1 id='2classic-architectures'><span>2.Classic Architectures</span></h1><h2 id='22-call-return-style'><span>2.2 Call-Return Style</span></h2><p>&nbsp;</p><h2 id='23-data-flow-style'><span>2.3 Data Flow Style</span></h2><p>&nbsp;</p><h2 id='24-layered-style'><span>2.4 Layered Style</span></h2><p>&nbsp;</p><h2 id='25-event-driven-style'><span>2.5 Event-driven Style</span></h2><p>&nbsp;</p><h2 id='26-repository-style'><span>2.6 Repository Style</span></h2><h1 id='3-distributed-architectures'><span>3. Distributed Architectures</span></h1><h2 id='31-traditional-distributed-architecture-style'><span>3.1 Traditional Distributed Architecture Style</span></h2><h3 id='311-introduction'><span>3.1.1 Introduction</span></h3><p><strong><span>1.What is distributed system?</span></strong><span>⭐</span></p><p><span>Distributed system refers to a system based on network environment, in which functions and data are distributed on multiple computers connected through the network, and through their mutual communication, they cooperate to complete various functions of the system.</span></p><p><span>分布式系统是指基于网络环境的系统，功能和数据分布在通过网络连接的多台计算机上，通过它们之间的相互通信，协同完成系统的各种功能。</span></p><p><span>2.What problems does distributed system solve?</span></p><p><span>Distributed system can solve the problems that are difficult to solve in centralized system: make a system use the resources of multiple computers, including CPU, memory, external memory and other hardware resources and various software resources; Users can cross the barriers of geographical location and use the system to complete their business processing in different places, including multi regional cooperative business processing.</span></p><p><span>分布式系统可以解决集中式系统难以解决的问题:使一个系统使用多台计算机的资源，包括CPU、内存、外接内存等硬件资源和各种软件资源;用户可以跨越地理位置的障碍，使用该系统完成异地业务处理，包括多区域合作业务处理。</span></p><p><span>3.The architecture of distributed system mainly has the following styles</span></p><ul><li><span>① The first is called host + simulation terminal architecture, which takes one computer as the host and other computers only as its remote simulation terminal. This architecture came into being in the era when mainframe computers were the mainstream and the performance of personal computers was weak.</span></li><li><span>② The second is file sharing architecture. In the file sharing architecture, the system functions are distributed to each node of the network, and the data is stored on a host called file server. Or the system functions and data are distributed to each node, but the data is processed as a shared file and can be used by the node.</span></li><li><span>③ The third is called client/server architecture. In this structure, the server is the computer that provides services, and the client is the computer that requests services. Compared with the file sharing architecture, the client/server architecture significantly reduces the amount of data transmission on the network. It has the advantages of high operation efficiency, strong openness and expandability.</span></li></ul><p><span>分布式系统的架构主要有以下几种风格:</span>
<span>1)第一种称为主机+仿真终端架构，即以一台计算机为主机，其他计算机仅作为其远程仿真终端。这种架构是在大型机为主流、个人电脑性能较弱的时代产生的。</span>
<span>2)二是文件共享架构。在文件共享架构中，系统功能分布到网络的各个节点，数据存储在一个称为文件服务器的主机上。或者将系统功能和数据分散到各个节点，但数据作为共享文件进行处理，节点可以使用。</span>
<span>3)第三种是客户机/服务器架构。在这种结构中，服务器是提供服务的计算机，客户端是请求服务的计算机。与文件共享架构相比，客户端/服务器架构显著减少了网络上的数据传输量。具有运行效率高、开放性强、可扩展性强等优点。</span></p><h3 id='312-cs-architecture-style-⭐'><span>3.1.2 C/S Architecture Style ⭐</span></h3><p><span>Next, let&#39;s take a look at the two-tier C/S architecture, which divides the application into two. The server is responsible for </span><strong><span>data management</span></strong><span>, and the client </span><strong><span>completes the interactive tasks of users</span></strong><span>. The server manages data for multiple client applications, which send, request, and analyze data received from the service.</span></p><p><span>接下来，让我们看一下两层C/S架构，它将应用程序分为两部分。服务器(后台)负责数据管理，客户端(前台)完成用户交互任务。服务器为多个客户端应用程序管理数据，这些应用程序发送、请求和分析从服务接收到的数据。</span></p><p><span>1.</span><strong><span>Server-Based Architectures</span></strong></p><p><span>The very first computing architectures were server-based architectures, with the server (usually a central mainframe computer) performing all four application functions. The clients (usually terminals) enabled users to send and receive messages to and from the server computer. The clients merely captured keystrokes and sent them to the server for processing and accepted instructions from the server on what to display.</span></p><p><span>最早的计算体系结构是基于服务器的体系结构，服务器执行所有四个应用程序功能。客户端使用户能够向服务器计算机发送和接收消息。客户机只是捕获击键并将它们发送到服务器进行处理，并接受来自服务器的关于显示内容的指令。</span></p><p><strong><span>概念：</span></strong><span>Application software is developed and stored on one computer, and all data are on the same computer. </span></p><p><span>优点：Very Simple. There is one point of control, because all messages flow through the one central server.</span></p><p><strong><span>缺点：</span></strong></p><ul><li><span>①  The server must process all messages</span></li><li><span>②  As the demands for more and more applications grow, server become overloaded and unable to quickly process all the users’ demands. </span></li><li><span>③ Response time becomes slower, and network managers are required to spend increasingly more money to upgrade the server computer. </span></li></ul><p><span>2.</span><strong><span>Client-Based Architectures</span></strong></p><p><span>With client-based architectures, the clients are personal computers on a local area network (LAN), and the server computer is a server on the same network. The application software on the client computers is responsible for the presentation logic, the application logic, and the data access logic; the server simply stores the data</span></p><p><span>在基于客户端的架构中，客户端是局域网(LAN)上的个人计算机，服务器计算机是同一网络上的服务器。客户端计算机上的应用软件负责表示逻辑、应用逻辑和数据访问逻辑;服务器只是存储数据</span></p><p><span>缺点：</span></p><p><span>① As the demands for more and more network applications grow, the network circuits can become overloaded. </span></p><p><span>② All data on the server must travel to the client for processing.</span></p><p><strong><span>3.Client–Server Architectures</span></strong></p><p><span>Most organizations today are moving to client–server architectures, which attempt to balance the processing between the client and the server by having both do some of the application functions. </span></p><p><span>如今，大多数组织都在转向客户机-服务器体系结构，这种体系结构试图通过让客户机和服务器都执行一些应用程序功能来平衡客户机和服务器之间的处理。</span></p><p><span>In these architectures,the </span><strong><span>client is responsible for the presentation logic,</span></strong><span> whereas the </span><strong><span>server is responsible for the data access logic and data storage</span></strong><span>.  </span></p><p><span>在这些体系结构中，客户端负责表示逻辑，而服务器负责数据访问逻辑和数据存储。</span></p><p><span>The client shown in Figure 12-3 can be referred to as a thick, or fat, client if it contains the bulk of application logic.  </span></p><p><span>如果图12-3所示的客户机包含大量应用程序逻辑，则可以将其称为粗客户机或胖客户机。</span></p><p><span>A current practice is to use </span><strong><span>thin clients</span></strong><span> because there is </span><strong><span>less overhead and maintenance</span></strong><span> in supporting thin-client applications.  </span></p><p><span>当前的实践是使用瘦客户机创建客户机-服务器体系结构，因为支持瘦客户机</span><strong><span>应用程序的开销和维护</span></strong><span>更少。</span></p><p><img src="img/3-1.png" style="zoom:67%;" /></p><p><strong><span>4.Analysis⭐</span></strong></p><p><span>The </span><strong><span>advantages of two-tier C/S architecture</span></strong><span>：</span></p><ul><li><span>① </span><strong><span>Powerful data operation and transaction processing capabilities.</span></strong><span> The model idea is simple and easy to be understood by people.</span></li><li><span>② Each server in the system can meet the requirements of each component, which shows </span><strong><span>great adaptability and flexibility</span></strong><span> to </span><strong><span>the changes of hardware and software</span></strong><span>, and is </span><strong><span>easy to expand and reduce the system.</span></strong></li><li><span>③ The functional components in the system are fully isolated. Large application processing tasks are </span><strong><span>distributed to many low-cost computers</span></strong><span> connected through the network to </span><strong><span>save a lot of costs.</span></strong></li></ul><p><strong><span>The two-tier C/S architecture also has the following disadvantages:</span></strong></p><ul><li><span>① </span><strong><span>Poor interoperability.</span></strong><span> The software developed with different development tools or platforms is generally </span><strong><span>incompatible with each other</span></strong><span> and cannot or is </span><strong><span>difficult to transplant to other platforms.</span></strong></li><li><span>② </span><strong><span>The cost of system management and configuration is high.</span></strong><span> For a small change to the software, each client must be updated, resulting in difficulties in software maintenance and upgrading.</span></li><li><span>③ </span><strong><span>Poor system scalability.</span></strong><span> When the number of </span><strong><span>users increases</span></strong><span> to a certain number, the performance deteriorates sharply, and the server becomes the bottleneck of the system.</span></li><li><span>④ </span><strong><span>The development cost is high.</span></strong><span> The two-tier C/S architecture has </span><strong><span>high requirements</span></strong><span> for </span><strong><span>the software and hardware configuration of the client,</span></strong><span> which increases the cost of the whole system, and the client becomes more and more bloated.</span></li><li><span>⑤ </span><strong><span>The client program design is complex.</span></strong><span> Client program design requires a lot of work, and the client is very huge.</span></li><li><span>⑥ </span><strong><span>The user interface has different styles</span></strong><span> and is troublesome to use, which is not </span><strong><span>conducive</span></strong><span> to popularization and use.</span></li></ul><p><span>Two-tier C/S architecture is usually used in </span><strong><span>non real-time information processing systems</span></strong><span> with less complex management and operation; It is suitable for lightweight transactions, </span><strong><span>less requests from the client</span></strong><span> to the server and </span><strong><span>less data transmission</span></strong></p><h3 id='313-bs-architecture-style'><span>3.1.3 B/S Architecture Style</span></h3><p><span>The components of B/S architecture are database server, web server and browser.</span></p><p><span>B/S体系结构的组成部分是数据库服务器、web服务器和浏览器。</span></p><p><span>In the B/S architecture, the browser requests from the web server, and the web server receives the browser&#39;s request and sends the request to the database server; The database server operates according to the request sent by the web server and returns the operation result to the web server: the web server sends the result obtained from the database server to the browser, and the browser displays the message received from the web server.</span></p><p><span>在B/S架构中，浏览器向web服务器发出请求，web服务器接收浏览器的请求并将请求发送给数据库服务器;数据库服务器根据web服务器发出的请求进行操作，并将操作结果返回给web服务器:web服务器将从数据库服务器获得的操作结果发送给浏览器，浏览器显示从web服务器接收到的消息。</span></p><p><span>(1) </span><strong><span>advantages：</span></strong></p><ul><li><span>① For the software based on B/S architecture, the system installation, modification and maintenance are </span><strong><span>all solved on the server side</span></strong><span>, and the system </span><strong><span>maintenance cost is low</span></strong><span>.</span></li><li><span>②  B/S architecture also provides the most </span><strong><span>open foundation</span></strong><span> for the online, networking and unified services of </span><strong><span>heterogeneous machines</span></strong><span>, heterogeneous networks and heterogeneous application services.</span></li><li><span>③ </span><strong><span>Better security.</span></strong><span> In this structure, the client application </span><strong><span>cannot directly access the data</span></strong><span>. The application server can not only control which data is changed and accessed, but also control the change and access mode of the data</span></li><li><span>④ The </span><strong><span>&quot;thin client&quot;</span></strong><span> in the real sense has </span><strong><span>high stability, scalability and execution efficiency.</span></strong></li><li><span>⑤  </span><strong><span>Services can be managed together</span></strong><span> and serve clients uniformly, so it has </span><strong><span>good fault tolerance</span></strong><span> and </span><strong><span>load balancing ability.</span></strong></li><li><span>⑥ It </span><strong><span>expands the functional coverage</span></strong><span> of the organization&#39;s computer application system, makes more full use of various resources on the network, and greatly reduces the workload of application maintenance.</span></li><li><span>⑦ The combination of B/S computer application system and Internet also makes it possible to realize some new enterprise computer applications, such as e-commerce, customer relationship management and so on.</span></li></ul><p><span>(2) </span><strong><span>disadvantages:</span></strong></p><ul><li><span>① The client browser exchanges data in a synchronous request / response mode, and the </span><strong><span>server refreshes the page every time it requests.</span></strong></li><li><span>② </span><strong><span>Limited by the HTTP Protocol</span></strong><span>, the </span><strong><span>response speed</span></strong><span> of data query is much </span><strong><span>higher than that of C/S architecture.</span></strong></li><li><span>③ Data submission is generally based on the page, and the dynamic interaction of data is not strong, which is </span><strong><span>not conducive</span></strong><span> to the application of online transaction processing.</span></li><li><span>④ </span><strong><span>Limited by the expressive ability of HTML</span></strong><span>, it is difficult to support </span><strong><span>complex GUI</span></strong></li></ul><h3 id='314-cs-and-bs-mixed-software-architecture'><span>3.1.4 C/S and B/S Mixed Software Architecture</span></h3><p>&nbsp;</p><h2 id='32-middleware'><span>3.2 Middleware</span></h2><h2 id='33-mvc-architecture-style-⭐'><span>3.3 MVC Architecture Style ⭐</span></h2><p><strong><span>MVC, M represents model, V represents view, and C represents controller.</span></strong></p><p><img src="img/3-2.png" referrerpolicy="no-referrer"></p><p><span>By separating data patterns from various data that can be accessed and controlled, the design of distributed system can be improved.  </span></p><p><strong><span>1.⭐MVC各部分的作用：</span></strong></p><ul><li><span>① The model is responsible for </span><strong><span>expressing and accessing business data and performing business logic judgment and operation.</span></strong><span> When the model layer changes, it </span><strong><span>notifies the view layer</span></strong><span> and provides the latter with the ability to access its own state.  At the same time, the </span><strong><span>control layer will also access</span></strong><span> its function to complete relevant tasks</span></li><li><span>② The view layer is responsible for </span><strong><span>displaying the content of the model layer.</span></strong><span>  It takes data from the model layer and specifies how these data are displayed.       When the </span><strong><span>model layer changes</span></strong><span>, it will be </span><strong><span>updated automatically.</span></strong><span> In addition, the view layer will also transmit the user&#39;s input to the controller.</span></li><li><span>③ The controller </span><strong><span>receives the user&#39;s input</span></strong><span> and </span><strong><span>calls the model and view</span></strong><span> to </span><strong><span>complete the user&#39;s requirements</span></strong><span>.  </span></li></ul><p><span>2.MVC的优点</span></p><ul><li><span>① MVC style decomposes and considers all aspects of problems, simplifying the system design and ensuring the scalability of the system; </span></li><li><span>② It can change the interface but does not affect the functional kernel of the application, which makes the system easy to evolve and develop and has good maintainability;    </span></li><li><span>③ </span><strong><span>High reusability</span></strong><span>, multiple views can share a model, </span><strong><span>separate</span></strong><span> data and business rules </span><strong><span>from the presentation layer</span></strong><span>, and </span><strong><span>maximize code reuse;</span></strong><span>    </span></li><li><span>④ Business logic is easier to test.</span></li></ul><p><span>3.MVC的缺点：</span></p><ul><li><span>① It </span><strong><span>increases the complexity</span></strong><span> of </span><strong><span>system structure and implementation.</span></strong><span>    </span></li><li><span>② Strictly following MVC for simple interface and separating the model, view and controller will </span><strong><span>increase the complexity of structure</span></strong><span>, and may produce too many update operations and reduce the operation efficiency.    </span></li></ul><p><span>MVC style is mainly used in the field of complex user interface development of application software.</span></p><h2 id='34-modern-architecture-styles'><span>3.4 Modern Architecture Styles</span></h2><h3 id='341-microkernel-architecture'><span>3.4.1 Microkernel Architecture</span></h3><p><span>The microkernel architecture pattern is a natural pattern for implementing product-based applications.  A product-based application is one that is packaged and made available for download in versions as a typical third-party product.  However, many companies also develop and release their internal business applications like software products, complete with versions, release notes, and pluggable features.  These are also a natural fit for this pattern.  The microkernel architecture pattern allows you to add additional application features as plug-ins to the core application, providing extensibility as well as feature separation and isolation.</span></p><p><span>微内核体系结构模式是实现基于产品的应用程序的自然模式。基于产品的应用程序是作为典型的第三方产品打包并提供版本供下载的应用程序。然而，许多公司也开发和发布他们的内部业务应用程序，如软件产品，包括版本、发布说明和可插拔功能。这些也很适合这个模式。微内核体系结构模式允许您将额外的应用程序特性作为</span><strong><span>插件</span></strong><span>添加到核心应用程序，从而提供</span><strong><span>可扩展性以及特性分离和隔离。</span></strong></p><p><span>One great thing about the microkernel architecture pattern is that it can be embedded or used as part of another architecture pattern. </span></p><p><span>微内核体系结构模式的一个优点是，它可以被嵌入或用作另一个体系结构模式的一部分。</span></p><p><span>The microservices architecture pattern provides great support for evolutionary design and incremental development.  You can first produce a solid core system, and as the application evolves incrementally, add features and functionality without having to make significant changes to the core system.</span></p><p><span>微服务体系结构模式为进化设计和增量开发提供了强大的支持。您可以首先生成一个可靠的核心系统，然后随着应用程序的逐步发展，添加特性和功能，而不必对核心系统进行重大更改。</span></p><p><span>1.微内核优点：</span></p><ul><li><p><strong><span>① High Overall agility</span></strong><span> 整体敏捷性高</span></p><p><span>Changes can largely be isolated and implemented quickly through loosely coupled plug-in modules.</span></p></li><li><p><strong><span>② Easy to be deployed</span></strong></p><p><span>Depending on how the pattern is implemented, the plug-in modules can be dynamically added to the core system at runtime</span></p></li><li><p><strong><span>③ Easy to test</span></strong></p><p><span>Plug-in modules can be tested in isolation and can be easily mocked by the core system to demonstrate or prototype a particular feature with little or no change to the core system.</span></p><p><span>插件模块可以单独测试，并且可以很容易地由核心系统模拟来演示或原型化特定的特性，而对核心系统的更改很少或没有更改。</span></p></li><li><p><strong><span>④ High performance</span></strong></p><p><span>In general, most applications built using the microkernel architecture pattern perform well because you can customize and streamline applications to only include those features you need.</span></p></li></ul><p><span>2.微内核的缺点：</span></p><ul><li><p><span>① </span><strong><span>Low scalability</span></strong></p><p><span>Because most microkernel architecture implementations are product based and are generally smaller in size, they are implemented as single units and hence not highly scalable.</span></p></li><li><p><span>② </span><strong><span>Not easy to develop</span></strong></p><p><span>The microkernel architecture requires thoughtful design and contract governance, making it rather complex to implement.</span></p><p><span>微内核架构需要经过深思熟虑的设计和契约治理，因此实现起来相当复杂。</span></p></li></ul><h3 id='342-microservices-architecture-pattern'><span>3.4.2 Microservices Architecture Pattern</span></h3><p><span>The microservices architecture pattern solves many of the common issues found in both monolithic applications as well as service-oriented architectures.  Since major application components are split up into smaller, separately deployed units, applications built using the microservices architecture pattern are generally </span><strong><span>more robust</span></strong><span>, </span><strong><span>provide better scalability, and can more easily support continuous delivery.</span></strong></p><p><span>微服务体系结构模式解决了在单片应用程序和面向服务的体系结构中发现的许多常见问题。由于主要的应用程序组件被分割成更小的、单独部署的单元，使用微服务架构模式构建的应用程序通常更健壮，提供更好的可伸缩性，并且更容易支持持续交付。</span></p><p><strong><span>微服务的特点：</span></strong></p><ul><li><p><strong><span>① High Overall agility</span></strong><span> 整体敏捷性高</span></p><p><span>Due to the notion of separately deployed units, change is generally isolated to individual service components, which allows for fast and easy deployment. </span></p><p><span>由于单独部署单元的概念，更改通常隔离到单独的服务组件，这允许快速和简单的部署。</span></p></li><li><p><strong><span>② Easy to be deployed</span></strong></p><p><span>The deployment characteristics of the microservices pattern rate very high due to the fine-grained and independent nature of the remote services.</span></p><p><span>由于远程服务的细粒度和独立性，微服务模式的部署特性非常高。</span></p></li><li><p><strong><span>③ Easy to test</span></strong></p><p><span>Due to the separation and isolation of business functionality into independent applications, testing can be scoped, allowing for more targeted testing efforts. </span></p><p><span>由于将业务功能分离并隔离到独立的应用程序中，因此可以确定测试的范围，从而允许进行更有针对性的测试工作。</span></p></li><li><p><strong><span>④ Low performance </span></strong><span>性能低</span></p><p><span>This pattern is not suitable to high-performance applications due to the distributed nature of the </span><strong><span>microservices architecture pattern.</span></strong></p><p><span>这种模式本身并不适合高性能应用程序。</span></p></li><li><p><strong><span>⑤ Good scalability </span></strong><span>扩展性好</span></p><p><span>Because the application is split into separately deployed units, each service component can be individually scaled, allowing for fine-tuned scaling of the application. </span></p><p><span>因为应用程序被分割为单独部署的单元，所以每个服务组件都可以单独伸缩，从而允许对应用程序进行微调。</span></p></li><li><p><strong><span>⑥ Easy to develop</span></strong></p><p><span>Because functionality is isolated into separate and distinct service components, development becomes easier due to the smaller and isolated scope. </span></p><p><span>由于功能被隔离到独立的不同服务组件中，因此较小且隔离的范围使开发变得更容易</span></p></li></ul><p><span>However, while the microkernel pattern does not naturally lend itself to high-performance applications, in general, most applications built using the microkernel architecture pattern perform well because you can customize and streamline applications to only include those features you need. </span></p><p><span>然而，虽然微内核模式本身并不适合于高性能应用程序，但一般来说，使用微内核架构模式构建的大多数应用程序性能都很好，因为您可以自定义和简化应用程序，使其只包含您需要的那些特性。</span></p><h3 id='343-cloud-architecture'><span>3.4.3 Cloud Architecture</span></h3><h1 id='4design-principles'><span>4.Design Principles</span></h1><h2 id='41-design-goals-for-development'><span>4.1 Design Goals for Development</span></h2><h3 id='411-maintainability'><span>4.1.1 Maintainability</span></h3><p><strong><span>1.Software Maintenance</span></strong></p><p><span>A system with good maintainability must be able to allow new design requirements to be easily added to the existing system. Because the requirements of users often change, if the design of a system cannot predict what changes will happen to the performance requirements of the system, the design of the system will not be compatible with the new performance requirements, and the system design will not be able to keep up with the changes. Even if new capabilities can be added to the system, they have to be added in a way that destroys the original design intent and design framework.</span></p><p><span>具有良好可维护性的系统必须能够允许将新的设计需求轻松地添加到现有系统中。因为用户的需求经常变化，如果系统的设计不能预测系统的性能需求会发生什么变化，系统的设计就会与新的性能需求不兼容，系统设计就无法跟上变化的步伐。即使可以向系统添加新的功能，也必须以破坏原始设计意图和设计框架的方式添加它们。</span></p><p><strong><span>2.Design Goals with Maintainability</span></strong></p><p><span>A good system design should have the following properties: scalability, flexibility and pluggability.</span></p><p><span>(1) Scalability 可扩展性</span></p><p><span>Scalability means that new performance can be easily added to the system. To add a new performance, while adding an independent new module, it will not affect many other modules and will not cause changes to several modules. </span></p><p><span>可伸缩性意味着可以很容易地向系统添加新的性能。添加一个新的性能，在添加一个独立的新模块的同时，不会影响许多其他模块，也不会引起几个模块的变化。</span></p><p><span>(2) Flexibility 灵活性</span></p><p><span>Flexibility is the modification of code in the system will not affect other modules. For example, if the air conditioner of a car breaks down and the technician repairs the air conditioner, the engine of the system cannot be started, which is not a very flexible system.</span></p><p><span>灵活性是对系统中代码的修改不会影响到其他模块。例如，如果汽车的空调坏了，技术人员修理空调，系统的发动机无法启动，这不是一个非常灵活的系统。</span></p><p><span>(3) Pluggability 可插拔性</span></p><p><span>You can easily replace one class with another with the same interface. A piece of code and function module can be used in a new module or new system. These existing codes will not depend on a lot of other things. </span></p><p><span>您可以使用相同的接口轻松地将一个类替换为另一个类。一段代码和功能模块可以用于新模块或新系统。这些现有的代码将不依赖于许多其他东西。例如，将汽车的防撞气囊取出并更换一个新的气囊应该是很容易的。如果汽车的传动杆在取出安全气囊后不工作，则该系统不是一个具有良好可插拔性的系统。</span></p><h3 id='412-reusability'><span>4.1.2 Reusability</span></h3><p><span>1.重用的好处</span></p><ul><li><span>Reuse can improve production efficiency. The reuse of software components can save costs for future use. </span></li><li><span>Reuse can improve software quality. Reusable software components have more quality assurance than non reusable software components</span></li><li><span>Reuse can improve the maintainability of the system. If a software component with high reuse rate has program defects, such defects can be eliminated quickly and completely.</span></li></ul><p><span>2.Traditional reuse</span></p><ul><li><span>Code clipping reuse</span></li><li><span>Algorithm reuse</span></li><li><span>Reuse of data structure</span></li></ul><p><span>3.Reuse of object-oriented design</span></p><p><span>In object-oriented languages, such as Java, language features such as </span><strong><span>abstract inheritance, encapsulation and polymorphism of data</span></strong><span> make a system reusable at a higher level. </span></p><ul><li><span>The abstraction and inheritance of data make concepts and definitions reusable; </span></li><li><span>Polymorphism makes the implementation and application reusable; </span></li><li><span>Abstraction and encapsulation can maintain and promote the maintainability of the system. </span></li></ul><p><span>In this way, the focus of reuse will no longer focus on the specific implementation details such as functions and algorithms, but on the most important abstract level containing macro business logic.</span></p><p><span>在面向对象语言(如Java)中，</span><strong><span>抽象继承、封装和数据多态性</span></strong><span>等语言特性使系统在</span><strong><span>更高层次上可重用</span></strong><span>。数据的抽象和继承使得概念和定义可重用;多态性使实现和应用程序可重用;抽象封装可以维护和提高系统的可维护性。这样，重用的重点就不再是函数和算法等具体的实现细节，而是包含宏观业务逻辑的最重要的抽象层次。</span></p><h3 id='413-maintainability-reusability-design-principles-and-design-patterns'><span>4.1.3 Maintainability, Reusability, Design Principles and Design Patterns</span></h3><p><span>In object-oriented design, maintainability reuse is based on design principles and design patterns.</span></p><p><strong><span>Design principle</span></strong><span> is the guiding principle to </span><strong><span>improve the maintainability and reusability</span></strong><span> of a system at the same time. The maintainability reuse can be realized by designing the system according to the design principles. </span><strong><span>First of all</span></strong><span>, these design principles are </span><strong><span>reuse principles</span></strong><span>. </span></p><ul><li><p><span>The principle of opening and closing, the principle of Richter substitution, the principle of dependency inversion and the principle of combination / aggregation reuse can improve the reusability and scalability of the system at the same time. Allowing a new class with the same interface to replace the old class is the reuse of abstract interfaces. </span></p><p><span>开放和关闭原则、Richter替换原则、依赖关系反转原则和组合/聚合重用原则，同时提高了系统的可重用性和可伸缩性。允许具有相同接口的新类替换旧类是抽象接口的重用。客户端不依赖于具体的实现类，而是依赖于抽象接口。</span></p></li><li><p><span>The principle of opening and closing, the principle of Dimitri and the principle of interface isolation can improve the reusability of the system and the flexibility of the system at the same time.</span></p><p><span>开合原理、迪米特里原理和接口隔离原理可以提高系统的可重用性，同时提高系统的灵活性。</span></p></li><li><p><span>The principle of opening and closing, the principle of Richter substitution, the principle of combination / aggregation reuse and the principle of dependency inversion can improve the reusability of the system and the pluggability of the system at the same time. </span></p><p><span>开闭原理、Richter代入原理、组合/聚合复用原理和依赖项反转原理可以提高系统的可重用性，同时提高系统的可插拔性</span></p></li><li><p><span>Design pattern itself can not guarantee the reusability and maintainability of a system, but designers can improve the reusability and maintainability of system design by using the idea of design pattern. The idea of design pattern is helpful to improve the designer&#39;s design style and level, and promote the communication between peers.</span></p><p><span>设计模式本身并不能保证系统的可重用性和可维护性，但是设计人员可以利用设计模式的思想来提高系统设计的可重用性和可维护性。设计模式的思想有助于提高设计师的设计风格和水平，促进同行之间的交流。</span></p></li></ul><p>&nbsp;</p><p>&nbsp;</p><h2 id='42-design-principles'><span>4.2 Design Principles</span></h2><p><span>SOLID Principles are some important point about SOLID design principles. SOLID can come to rescue when all the requirements are not upfront while developing code.    SOLID is not a framework.    SOLID principle is not a library.    It is not technology bound.    It is not pattern.</span>
<span>Most of the code written today, though they are written in object oriented way but they are not object oriented and more or less procedural.    Writing code in OO language is not a guarantee that the code will be OO.    But we can make our code OO by using solid principles.    We can more productive by using SOLID.    Code is more maintainable and understandable.    When code suffer from </span><strong><span>design smell</span></strong><span> then </span><strong><span>SOLID is answer.</span></strong></p><p><span>Design smell:</span></p><ul><li><span>Rigidity – The design is difficult to change.</span></li><li><span>Fragility – Design is easy to break.  </span></li><li><span>Immobility – The design is difficult to reuse.  </span></li><li><span>Viscosity – It is difficult to do the right thing.</span></li><li><span>Needless Complexity – Over design.</span></li></ul><p><span>Following are the five SOLID design principles which we should be ware of</span></p><ul><li><span>S – Single responsibility principle(SRP)</span></li><li><span>O – Open closed principle(OCP)</span></li><li><span>L – Liskov Substitution principle(LSP).   How polymorphism should work.</span></li><li><span>I – Interface segregation Principle(ISP).   How interface should be designed.</span></li><li><span>D- Dependency inversion principle(DIP) which describes principle between abstraction and concrete types.</span></li></ul><h3 id='421-single-responsibility-principle'><span>4.2.1 Single Responsibility Principle</span></h3><p><span>1.概念：</span></p><p><span>According to SRP a class should always handle </span><strong><span>single functionality</span></strong><span> or there should not be more than one reason for a class to change.  It is used to achieve loose coupling between two different functionalities.</span></p><p><span>根据SRP，一个类应该总是处理单一的功能，或者一个类不应该有超过一个的改变原因。它用于实现两个不同功能之间的松耦合</span></p><p><span>2.优点、好处</span></p><ul><li><span>① </span><strong><span>Making Changes Becomes Easy</span></strong>
<span>With highly uncoupled classes and methods, you can move around and make changes as needed without worrying how other methods and logic would be affected.</span></li><li><span>② </span><strong><span>Unit Testing is Simplified</span></strong>
<span>When you have modular code to test, it is pretty simple to test each method or class independently without refactoring any code.s</span></li><li><span>③ </span><strong><span>Code Becomes Easier to Understand</span></strong>
<span>If each module of your code focuses on one job, it will be super easy for any person reading the code to figure out the purpose.</span></li><li><span>④ </span><strong><span>Scaling Codebase is an Easy Job</span></strong><span> 扩展代码库是一项简单的工作</span>
<span>Since your code has singular modules that make up the application, it is easy to add or remove these modules to alter your application.    </span></li></ul><h3 id='422-open-closed-design-principle'><span>4.2.2 Open Closed Design Principle</span></h3><p><span>1.概念：</span></p><p><span>The open closed design principle says that software entities like classes, modules, functions, etc. should be open for extension, but closed for modification. </span></p><p><span>2.优点、好处</span></p><ul><li><p><span>① Reduced Redundancies &amp; Bugs 减少冗余和bug</span></p><p><span>The open/closed principle solves issue of redundancies and bugs introduced due to uncoordinated changes.</span></p><p><span>The open/closed principle limits you from making changes in places that can affect other code segments with unpredictable results and instead provides you with a way to modify and grow your codebase safely.</span></p><p><span>开放/封闭原则解决了由于不协调的更改而引入的冗余和bug问题。</span>
<span>开放/封闭原则限制了您在可能影响其他代码段并导致不可预测结果的地方进行更改，相反，它为您提供了一种安全地修改和增长代码库的方法。</span></p></li><li><p><span>② Increased Flexibility 增加了灵活性</span></p><p><span>The next issue that this principle solves is that of uncoordinated changes and inflexible code modules.   The open part of this principle helps you utilize the code you have already written and reuse it to create new solutions.</span></p><p><span>该原则解决的下一个问题是不协调的更改和不灵活的代码模块。该原则的开放部分帮助您利用已经编写的代码并重用它来创建新的解决方案。</span></p></li></ul><h3 id='433-liskov-substitution-principle'><span>4.3.3 Liskov Substitution Principle</span></h3><p><span>1.概念：</span></p><p><span>The Liskov Substitution principle defines that objects of a superclass shall be replaceable with objects of its subclasses without breaking the application.       That requires the objects of your subclasses to behave in the same way as the objects of your superclass.</span></p><p><span>2.优点、好处</span></p><ul><li><span>① Better Design and Scalability</span></li><li><span>② Increased Code Reusability and Reduced Codependency</span></li></ul><h3 id='434-interface-segregation-principle'><span>4.3.4 Interface Segregation Principle</span></h3><p><span>1.概念：</span></p><p><span>Clients should not be forced to implement unnecessary methods which they will not use.</span></p><p><span>To achieve the ISP design principle we favor many, smaller, client-specific interfaces over one larger interface.</span></p><p><span>Similar to the Single Responsibility Principle, the goal of the Interface Segregation Principle is to reduce the side effects and frequency of required changes by splitting the software into multiple, independent parts.</span></p><p><span>2.优点、好处</span></p><ul><li><p><span>① Reduced Side-effects Due to Unneeded Elements</span></p><p><span>由于该原则旨在将更广泛的接口分解为更小的接口，并消除与实现接口的类不相关的成员，因此它减少了由于这些方法没有得到适当处理而可能出现的问题。</span></p></li><li><p><span>② Enhanced Code Modularity and Flexibility</span></p><p><span>每个片段将彼此独立，并且您可以实现更详细的测试，以确保您的代码在所有情况下都能正确地运行。</span>
<span>除了健壮性之外，您还可以在需要时灵活地修改应用程序逻辑。您不需要担心现有的代码破坏，因为</span><strong><span>每个接口和类都是独立</span></strong><span>的。</span></p></li></ul><p>&nbsp;</p><h3 id='435--dependency-inversion-principle'><span>4.3.5  Dependency Inversion Principle</span></h3><p><span>1.概念：</span></p><p><span>Code should depends upon abstractions rather than upon concrete details.</span></p><p><span>High-level modules should not depend on low-level modules.   </span></p><p><span>高级模块不应该依赖于低级模块。两者都应该依赖于抽象。</span></p><p><span>Abstractions should not depend on details. Details should depend on abstractions.</span></p><p><span>抽象不应依赖于细节。细节应该依赖于抽象。</span></p><p><span>2.优点、好处</span></p><p><span>① Reduced Dependencies</span></p><p><span>The most significant benefit that it offers is that </span><strong><span>your classes don’t depend on each other.</span></strong><span>  You can freely make modifications to your application’s structure without worrying about the consistency of dependencies.</span></p><p><span>②  Stable Application Design</span></p><p><span>The ability to reuse high-level modules over and over again contributes to a sound application design.  This adds to the stability of your application design since you do not need to go editing your parent classes to introduce new changes to your application’s structure. </span></p><h3 id='436-law-of-demeter'><span>4.3.6 Law of Demeter</span></h3><p><span>1.概念：</span></p><ul><li><span>Each unit should have only limited knowledge about other units: only units &quot;closely&quot; related to the current unit.</span></li><li><span>Each unit should only talk to its friends;  don&#39;t talk to strangers.</span></li><li><span>Only talk to your immediate friends.</span></li></ul><p><span>2.什么是直接朋友？</span></p><p><span>Every object has a coupling relationship with other objects.   As long as there is a coupling relationship between two objects, we say that the relationship between the two objects is a friend relationship.</span></p><p><span>The Law of Demeter for functions requires that a </span><strong><span>method M</span></strong><span> of an </span><strong><span>object O</span></strong><span> may only invoke the methods of the following kinds of objects:</span></p><ul><li><span>itself 其本身</span></li><li><span>M’s parameters 方法的参数</span></li><li><span>Any objects created/instantiated within M 由方法创建的对象</span></li><li><span>O’s direct component objects 对象的直接组件</span></li><li><span>A global variable, accessible by O, in the scope of M 可由其访问的全局变量</span></li></ul><p><span>2.优点、好处</span></p><ul><li><span>① Dependencies between classes and coupling are reduced.</span></li><li><span>② Classes can be reused with ease.</span></li><li><span>③ The code is easier to test.</span></li><li><span>④ The code is more maintainable and flexible </span></li></ul><h3 id='437-composition-reuse-principle'><span>4.3.7 Composition Reuse Principle</span></h3><p><span>1.Object Composition</span></p><p><span>(1) 概念：Object composition requires that the objects being composed have well-defined interfaces.</span></p><p><span>(2) 优点：</span></p><ul><li><p><span>Object composition is defined dynamically at run-time through objects acquiring references to other objects.</span></p></li><li><p><span>Composition requires objects to respect each others’ interfaces, which in turn requires carefully designed interfaces that don’t stop you from using one object with many others.</span></p><p><span>组合要求对象尊重彼此的接口，这反过来又要求精心设计的接口，不阻止您将一个对象与许多其他对象一起使用。</span></p></li><li><p><span>Favoring object composition over class inheritance helps you keep each class encapsulated and focused on one task.</span></p><p><span>将对象组合置于类继承之上可以帮助您将每个类封装起来并专注于一个任务</span></p></li><li><p><span>Composition is much more flexible than Inheritance.  </span></p></li></ul><p><span>(3)缺点：</span></p><p><span>A design based on object composition will have more objects, and the system’s behavior will depend on their interrelationships instead of being defined in one class.</span></p><p><span>基于对象组合的设计将拥有更多的对象(如果类更少)，并且系统的行为将依赖于它们的相互关系，而不是定义在一个类中。</span></p><p><span>2.Class Inheritance</span></p><p><span>继承的缺点：</span></p><ul><li><span>① You can’t change the implementations inherited from parent classes at run-time, because inheritance is defined at compile-time.  </span></li><li><span>② Parent classes often define at least part of their subclasses’ physical representation.  </span></li><li><span>③ It’s being hard to do unit test, because you cannot mock parent class.</span></li></ul><p><span>首先，您不能在运行时更改从父类继承的实现，因为继承是在编译时定义的。第二，通常更糟糕的是，父类通常定义至少部分子类的物理表示。第三，做单元测试很难，因为你不能模拟父类。</span></p><p><span>3.什么时候使用继承？什么时候使用组合？</span></p><p><span>Only </span><strong><span>use inheritance</span></strong><span> only for the sub-type of of your class type, or your subtype is-a relationship with the super class.</span></p><p><span>You are able to </span><strong><span>use composition</span></strong><span> at many condition when you have has-a relationship with other object.    </span></p><p><span>4.为什么要利用合成/聚合，尽量不要使用继承？</span></p><ul><li><span>① Inheritance is tightly coupled whereas composition is loosely coupled.</span></li><li><span>② There is no access control in inheritance whereas access can be restricted in composition.</span></li><li><span>③ Composition provides flexibility in invocation of methods that is useful with multiple subclass scenario.</span></li><li><span>④ Unit testing is easy in composition because we know what all methods we are using from other class.</span></li></ul><h2 id='43-conclusion'><span>4.3 Conclusion</span></h2><p><span>Next, we summarize the seven principles of software design pattern in one sentence, as shown in the table below.</span></p><figure><table><thead><tr><th><span>Design pattern</span></th><th><span>Conclusion</span></th><th><span>Goal</span></th></tr></thead><tbody><tr><td><strong><span>OCP</span></strong></td><td><strong><span>Open for extension,  close for modification.</span></strong></td><td><span>Reduce new risks  caused by maintenance</span></td></tr><tr><td><strong><span>DIP</span></strong></td><td><span>The </span><strong><span>high level</span></strong><span> should </span><strong><span>not rely on</span></strong><span> the </span><strong><span>low level</span></strong><span>, but should be </span><strong><span>interface oriented programming</span></strong></td><td><strong><span>It is easier to the  upgrading and expansion of code structure</span></strong></td></tr><tr><td><strong><span>SRP</span></strong></td><td><span>A  class only does one thing, and the implementation class should be single</span></td><td><span>Easy  to understand and improve the readability of the code</span></td></tr><tr><td><strong><span>ISP</span></strong></td><td><span>An interface can only do one thing, and the interface should be simplified and single</span></td><td><span>Functional  decoupling, high aggregation and low coupling</span></td></tr><tr><td><strong><span>LOD</span></strong></td><td><span>Don&#39;t  know what you shouldn&#39;t know. A class should keep the </span><strong><span>least understanding</span></strong><span> of  </span><strong><span>other objects</span></strong><span> and reduce the degree of coupling</span></td><td><span>Only  communicate with friends and don&#39;t talk to strangers to reduce code bloat</span></td></tr><tr><td><strong><span>LSP</span></strong></td><td><span>Do not destroy  the inheritance system. The function of subclass rewriting methods should be  changed and the meaning of parent class methods should not be affected</span></td><td><span>Prevent the  spread of inheritance</span></td></tr><tr><td><strong><span>CRP</span></strong></td><td><span>Try  to use combination or aggregation relationship to realize code reuse, and use  inheritance less</span></td><td><span>Reduce  code coupling</span></td></tr></tbody></table></figure><p><span>The purpose of these principles is only one: </span><strong><span>reduce the coupling</span></strong><span> between objects and </span><strong><span>increase the reusability, scalability and maintainability of programs.</span></strong></p><h1 id='5⭐design-patterns'><span>5.⭐Design Patterns</span></h1><h2 id='51-introduction'><span>5.1 Introduction</span></h2><h3 id='511-definition'><span>5.1.1 Definition</span></h3><p><span>A design pattern is a pattern—a way to pursue an intent—that uses classes and their methods in an object-oriented language.  </span></p><p><span>设计模式是一种在面向对象语言中使用类及其方法的模式(一种实现目的的方式)。</span></p><p><span>Developers often start thinking about design after learning a programming language and writing code for a while.  You might notice that someone else’s code seems simpler and works better than yours does, and you might wonder how that developer achieves such simplicity.  </span></p><p><span>Design patterns are a level up from code and typically show how to achieve a goal using a few classes.  A pattern represents an </span><strong><span>idea,</span></strong><span> not a particular implementation.</span></p><p><span>设计模式比代码更高一级，通常显示如何使用几个类来实现目标。一个模式代表一个思想，而不是一个特定的实现。</span></p><h3 id='512-pattern-levels'><span>5.1.2 Pattern levels</span></h3><p><span>The book divides them from high to low into three categories: architecture patterns, design patterns and idioms:</span></p><ul><li><span>① Architecture pattern is the highest level pattern.    When specifying the basic structure of the application, it can be used in the coarse-grained design in the initial stage.</span></li><li><span>② The design pattern is applicable to the end stage of coarse-grained design, such as when it is necessary to refine and expand the basic architecture of the software system.    For example, determine the basic communication mechanism between subsystems.    Design patterns are also applicable to the detailed design phase in specifying local design, such as the support required for multiple implementations of components.</span></li><li><span>③ Idioms are at the bottom, that is, some methods to convert the software architecture into writing programs in a special language in the implementation stage.    Most idioms are closely related to specific languages and focus on design and implementation.  </span></li></ul><h3 id='513-why-use-design-pattern'><span>5.1.3 Why Use Design Pattern?</span></h3><p><strong><span>Flexibility</span></strong><span>: It helps to provide the correct level of abstraction due to which objects become loosely coupled to each other which makes your code easy to change.</span></p><p><strong><span>Reusability</span></strong><span>: Loosely coupled and cohesive objects and classes can make your code more reusable. </span></p><p><strong><span>Shared</span></strong><span> </span><strong><span>Vocabulary</span></strong><span>: It creates more understanding between the team members related to the code.</span></p><p><strong><span>Capture best practices</span></strong><span>: Design patterns capture solutions which have been successfully applied to problems. By learning these patterns and the related problem, an inexperienced developer learns a lot about software design.</span></p><h3 id='514-how-to-select-design-pattern'><span>5.1.4 How to Select Design Pattern?</span></h3><h3 id='515-how-to-use-design-pattern'><span>5.1.5 How to Use Design Pattern?</span></h3><h3 id='516-categorization-of-pattern'><span>5.1.6 Categorization of pattern</span></h3><p><span>Design patterns can be categorized in the following categories:</span></p><p><strong><span>Creational patterns:</span></strong><span> Used to construct objects such that they can be decoupled from their implementing system.</span></p><p><strong><span>Structural patterns:</span></strong><span> Used to form large object structures between many disparate objects.</span></p><p><strong><span>Behavior patterns:</span></strong><span> Used to manage algorithms, relationships, and responsibilities between objects.</span></p><p><img src="img/5-1.png" style="zoom:80%;" /></p><p>&nbsp;</p><h2 id='52-⭐creational-design-patterns'><span>5.2 ⭐Creational Design Patterns</span></h2><h3 id='521-singleton'><span>5.2.1 Singleton</span></h3><p><span>1.定义：</span></p><p><span> A class must ensure that only single instance should be created and single object can be used by all other classes.</span></p><p><span>2.优点：</span></p><ul><li><span>It can save memory because object is not created at each request.  </span></li><li><span>Easy to share information.</span></li><li><span>Lazy loading.</span></li></ul><p><span>3.缺点：</span></p><ul><li><span>Bad readability</span></li><li><span>Not easy for extension</span></li><li><span>Week support for OOP</span></li><li><span>Not easy to test</span></li></ul><p><span>4.结构</span></p><p><img src="img/5-2.png" referrerpolicy="no-referrer"></p><p><span>构造方法私有，instance为实例，提供获取instance的方法getInstance()</span></p><p><span>5.模式</span></p><p><span>Eager mode</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">EagerSingleton</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-keyword">static</span> <span class="cm-keyword">volatile</span> <span class="cm-variable">EagerSingleton</span> <span class="cm-variable">instance</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">EagerSingleton</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// private constructor</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable">EagerSingleton</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable">EagerSingleton</span> <span class="cm-variable">getInstance</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">instance</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 312px;"></div><div class="CodeMirror-gutters" style="display: none; height: 312px;"></div></div></div></pre><p><span>thread safety, but waste memory because the instance is created irrespective of it is required in runtime or not. </span></p><p><span>Lazy mode</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Singleton</span> { &nbsp;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-keyword">static</span> <span class="cm-variable">Singleton</span> <span class="cm-variable">instance</span>; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable">Singleton</span> (){} &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-keyword">synchronized</span> <span class="cm-variable">Singleton</span> <span class="cm-variable">getInstance</span>() { &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">instance</span> <span class="cm-operator">==</span> <span class="cm-atom">null</span>) { &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">instance</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Singleton</span>(); &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  } &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">instance</span>; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 260px;"></div><div class="CodeMirror-gutters" style="display: none; height: 260px;"></div></div></div></pre><p><strong><span>thread unsafety</span></strong></p><p><span>Lazy mode of thread safety</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">LazySingleton</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-keyword">static</span> <span class="cm-keyword">volatile</span> <span class="cm-variable">LazySingleton</span> <span class="cm-variable">instance</span> <span class="cm-operator">=</span> <span class="cm-atom">null</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// private constructor</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable">LazySingleton</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable">LazySingleton</span> <span class="cm-variable">getInstance</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">instance</span> <span class="cm-operator">==</span> <span class="cm-atom">null</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">synchronized</span> (<span class="cm-variable">LazySingleton</span>.<span class="cm-keyword">class</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Double check</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">instance</span> <span class="cm-operator">==</span> <span class="cm-atom">null</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">instance</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">LazySingleton</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">instance</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 520px;"></div><div class="CodeMirror-gutters" style="display: none; height: 520px;"></div></div></div></pre><p><span>thread safety, but lock will affect performance.</span></p><h3 id='522-simple-factory'><span>5.2.2 Simple Factory</span></h3><p><span>1.概念：</span></p><p><span>Defines a class to be responsible for creating instances of other classes.</span></p><p><span>2.优点：</span></p><p><span>Better structure</span></p><p><span>Realizes the division of responsibilities</span></p><p><span>3.缺点：</span></p><ul><li><span>Disobey the OOP</span></li><li><span>It is difficult to expand the system.   Once a new product is added, the factory logic has to be modified.  </span></li><li><span>Factory logic may be complex when too many objects need to be created</span></li></ul><p><span>4.结构：</span></p><p><span>The essence of simple factory mode is that a factory class dynamically determines which instance of product class should be created according to the passed parameters. </span></p><p><span>These </span><strong><span>product classes</span></strong><span> </span><strong><span>inherit from a parent class or interface</span></strong><span>.</span></p><p><img src="img/5-3.png" style="zoom:80%;" /></p><p><span>组成：</span></p><p><strong><span>① Factory</span></strong><span>: factory.  The core of the simple factory pattern is responsible for implementing the internal logic of creating all instances.  The factory class can be directly called by the outside world to create the required product object.</span>
<strong><span>② Product</span></strong><span>: abstract product.  The parent type of all objects created by the simple factory pattern, which is responsible for describing the common interface shared by all instances.</span>
<strong><span>③ Concrete product</span></strong><span>: specific product.  The creation target of simple factory pattern.  All created objects are instances of a specific class that plays this role.</span></p><p><span>5.实现：</span></p><p><span>在本例中，有四个类，其中抽象接口产品表示抽象产品，两个具体产品类表示需要创建的类。核心类是工厂类工厂，它负责实现创建所有实例的内部逻辑。factory方法根据传入外部的产品名称创建相应的产品。产品名称由测试类给出。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">interface</span> <span class="cm-def">Product</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">ConcreteProduct1</span> <span class="cm-keyword">implements</span> <span class="cm-variable">Product</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">ConcreteProduct1</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"ConcreteProduct1"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">interface</span> <span class="cm-def">Product</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">ConcreteProduct2</span> <span class="cm-keyword">implements</span> <span class="cm-variable">Product</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">ConcreteProduct2</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"ConcreteProduct2"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Factory</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable">Product</span> <span class="cm-variable">factory</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">arg</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">arg</span>.<span class="cm-variable">equals</span>(<span class="cm-string">"p1"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-keyword">new</span> <span class="cm-variable">ConcreteProduct1</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable">arg</span>.<span class="cm-variable">equals</span>(<span class="cm-string">"p2"</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-keyword">new</span> <span class="cm-variable">ConcreteProduct2</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">else</span> <span class="cm-keyword">throw</span> <span class="cm-keyword">new</span> <span class="cm-variable">RuntimeException</span>(<span class="cm-string">"No this product!"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Test</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-variable">main</span>(<span class="cm-variable-3">String</span>[] <span class="cm-variable">args</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Product</span> <span class="cm-variable">product1</span>, <span class="cm-variable">product2</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">product1</span> <span class="cm-operator">=</span> <span class="cm-variable">Factory</span>.<span class="cm-variable">factory</span>(<span class="cm-string">"p1"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">product1</span> <span class="cm-operator">=</span> <span class="cm-variable">Factory</span>.<span class="cm-variable">factory</span>(<span class="cm-string">"p2"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 806px;"></div><div class="CodeMirror-gutters" style="display: none; height: 806px;"></div></div></div></pre><p>&nbsp;</p><h3 id='523-factory-method'><span>5.2.3 Factory Method</span></h3><p><span>在简单工厂模式中，只提供了一个工厂类。工厂类位于实例化产品类的中心位置。它知道每个产品对象的创建细节，并决定何时实例化哪个产品类。简单工厂模式最大的缺点是，当一个新产品要添加到系统中时，必须修改工厂类，必须添加必要的处理逻辑，这违反了“开闭原则”。</span></p><p><span>在简单工厂模式中，所有产品都是由同一个工厂创建的。工厂类具有沉重的责任和复杂的业务逻辑。具体产品与工厂类之间的耦合程度高，严重影响了系统的灵活性和可扩展性。工厂方法模式可以很好地解决这一问题。</span></p><p><span>1.概念：</span></p><p><span>Define an interface or abstract class for creating an object but </span><strong><span>let the subclasses decide</span></strong><span> which class to instantiate.</span></p><p><span>2.优点：</span></p><ul><li><span>Allows the sub-classes to choose the type of objects to create.</span></li><li><span>It promotes the loose-coupling by eliminating the need to bind application-specific classes into the code.    </span></li></ul><p><span>3.缺点：</span></p><p><span>Need add a factory when add a new product</span></p><p><span>4.应用场景：</span></p><ul><li><span>When a class doesn&#39;t know </span><strong><span>what sub-classes will be required to create</span></strong></li><li><span>When a class wants that its sub-classes specify the objects to be created.</span></li><li><span>When the parent classes choose the creation of objects to its sub-classes.</span></li></ul><p><span>5.结构：</span></p><p><img src="img/5-4.png" referrerpolicy="no-referrer"></p><p><span>组成：</span></p><p><span>① </span><strong><span>Creator</span></strong><span> is an </span><strong><span>abstract creator</span></strong><span>.  Its core is to declare the factory method, which returns a product.  Any concrete creator class  </span><strong><span>must implement this interface.</span></strong>
<span>② </span><strong><span>ConcreteCreator</span></strong><span> is a </span><strong><span>concrete creator</span></strong><span>.  Implement the concrete class of the abstract creator, implement the factory method, contain the logic closely related to the application, and call and return a product instance by the customer.</span>
<span>③ </span><strong><span>Product</span></strong><span> represents an </span><strong><span>abstract product</span></strong><span> and defines the </span><strong><span>product interface</span></strong><span>.  The parent type of the object created by the factory method pattern and the interface jointly owned by the product object. 由工厂方法模式创建的</span><strong><span>对象的父类型</span></strong><span>和</span><strong><span>产品对象</span></strong><span>共同拥有的</span><strong><span>接口</span></strong><span>。</span>
<span>④ </span><strong><span>ConcreteProduct</span></strong><span> refers to a </span><strong><span>specific product</span></strong><span>.  The method of each role created by the factory is an instance of a specific role of the product.  </span></p><p><span>6.实现：</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Creator </span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">interface</span> <span class="cm-def">Creatable</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Car</span> <span class="cm-variable">create</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//ConcreteCreator</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">BmwFactory</span> <span class="cm-keyword">implements</span> <span class="cm-variable">Creatable</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">Car</span> <span class="cm-variable">create</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-keyword">new</span> <span class="cm-variable">BmwCar</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//ConcreteCreator</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">BenzFactory</span> <span class="cm-keyword">implements</span> <span class="cm-variable">Creatable</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">Car</span> <span class="cm-variable">create</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-keyword">new</span> <span class="cm-variable">BenzCar</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Product (Abstract)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">interface</span> <span class="cm-def">Car</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">void</span> <span class="cm-variable">drive</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//ConcreteProduct</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">BmwCar</span> <span class="cm-keyword">implements</span> <span class="cm-variable">Car</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">drive</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"drive bmw car"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//ConcreteProduct</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">BenzCar</span> <span class="cm-keyword">implements</span> <span class="cm-variable">Car</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">drive</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"drive benz car"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Demo</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Client</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-variable">main</span>(<span class="cm-variable-3">String</span>[] <span class="cm-variable">args</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">BmwFactory</span> <span class="cm-variable">factory</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">BmwFactory</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Car</span> <span class="cm-variable">car</span> <span class="cm-operator">=</span> <span class="cm-variable">factory</span>.<span class="cm-variable">create</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">car</span>.<span class="cm-variable">drive</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1248px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1248px;"></div></div></div></pre><p>&nbsp;</p><h3 id='524-abstract-factory'><span>5.2.4 Abstract Factory</span></h3><p><span>1.概念：</span></p><p><span>Define an interface or abstract class for creating families of related objects but without specifying their concrete sub-classes.</span></p><p><span>意味着抽象工厂让一个类返回一个类的工厂。所以，这就是抽象工厂模式比工厂模式高一个层次的原因。</span></p><p><span>2.优点：</span></p><ul><li><span>① It isolates the client code from concrete classes.</span></li><li><span>② It eases the exchanging of object families.</span></li><li><span>③ It promotes consistency among objects.</span></li></ul><p><span>3.缺点：</span></p><p><span>It is too complicated.</span></p><p><span>4.应用场景：</span></p><ul><li><span>When the system needs to be independent of how its object are created, composed, and represented.</span></li><li><span>When the family of related objects has to be used together, then this constraint needs to be enforced.</span></li><li><span>When you want to provide a library of objects that does not show implementations and only reveals interfaces.</span></li><li><span>When the system needs to be configured with one of a multiple family of objects.</span></li></ul><p><span>4.结构：</span></p><p><img src="img/5-5.png" referrerpolicy="no-referrer"></p><p><span>组成：</span></p><ul><li><span>① </span><strong><span>AbstractFactory</span></strong><span> represents an abstract factory and declares the method interface for generating Abstract products</span></li><li><span>② </span><strong><span>ConcreteFactory</span></strong><span> represents a specific factory, defines a specific method for generating Abstract products, and generates a specific product.</span></li><li><span>③ </span><strong><span>AbstractProduct</span></strong><span> represents an abstract product and declares an interface for a product.</span></li><li><span>④ Product indicates a specific product. Define the specific product object generated by the specific factory and realize the abstract product interface.</span></li><li><span>⑤ The client represents the client and uses only the interfaces declared by the abstract factory class and the abstract product class.</span></li></ul><p><span>5.实现：</span></p><h3 id='525-builder'><span>5.2.5 Builder</span></h3><p><span>1.概念</span></p><p><span>Separate the construction of a com plex object from its representation. By doing so the same construction process can create different representations.</span></p><p><span>2.优点：</span></p><p><span>3.缺点：内部变化复杂，会有很多的建造类</span></p><p><span>4.应用场景</span></p><ul><li><span>When the algorithm for creating a complex object should be independent of the parts that make up the object and how they are assembled.</span></li><li><span>When the construction process must allow different representations for the object that’s constructed.</span></li></ul><p><span>5.结构</span></p><p><img src="img/5-6.png" referrerpolicy="no-referrer"></p><p><span>组成：</span></p><p><strong><span>Director:</span></strong><span> Responsible for invoking different builder methods required for the construction of the final object.  负责调用构建最终对象所需的不同构建器方法。</span></p><p><span>6.实现</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">interface</span> <span class="cm-def">Builder</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">makeWheel</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">makeEngine</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">makeShell</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">CarBuilder</span> <span class="cm-keyword">implements</span> <span class="cm-variable">Builder</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable">Car</span> <span class="cm-variable">car</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Car</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">makeWheel</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">car</span>.<span class="cm-variable">setWheel</span>(<span class="cm-keyword">new</span> <span class="cm-variable">Wheel</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">makeEngine</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">car</span>.<span class="cm-variable">setEngine</span>(<span class="cm-keyword">new</span> <span class="cm-variable">Engine</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">makeShell</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">car</span>.<span class="cm-variable">setShell</span>(<span class="cm-keyword">new</span> <span class="cm-variable">Shell</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Director</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Designer</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">command</span>(<span class="cm-variable">Builder</span> <span class="cm-variable">builder</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">builder</span>.<span class="cm-variable">makeShell</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">builder</span>.<span class="cm-variable">makeWheel</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">builder</span>.<span class="cm-variable">makeEngine</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Car</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable">Wheel</span> <span class="cm-variable">wheel</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable">Engine</span> <span class="cm-variable">engine</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable">Shell</span> <span class="cm-variable">shell</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> ...<span class="cm-variable">getE</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> ...<span class="cm-variable">setE</span>(<span class="cm-variable">E</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Client</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-variable">main</span>(<span class="cm-variable-3">String</span>[] <span class="cm-variable">args</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Builder</span> <span class="cm-variable">builder</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">CarBuilder</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Designer</span> <span class="cm-variable">designer</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Designer</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">designer</span>.<span class="cm-variable">command</span>(<span class="cm-variable">builder</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1326px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1326px;"></div></div></div></pre><p>&nbsp;</p><h2 id='53-⭐structural-design-patterns'><span>5.3 ⭐Structural Design Patterns</span></h2><h3 id='531-adapter'><span>5.3.1 Adapter</span></h3><p><span>1.概念</span></p><p><span>Adapter says that converts the interface of a class into another interface that a client wants or to provide the interface according to client requirement while using the services of a class with a different interface.</span></p><p><span>适配器模式表示，它只是“将类的接口转换为客户端想要的另一个接口”。</span>
<span>换句话说，根据客户需求提供接口，同时使用具有不同接口的类的服务。适配器模式也称为包装器。</span></p><p><span>2.优点：</span></p><p>&nbsp;</p><p><span>3.缺点：</span></p><p>&nbsp;</p><p><span>4.应用场景</span></p><ul><li><span>When there is an existing class, and its interface does not match the one you need.</span></li><li><span>When You want to create a reusable class that cooperates with unrelated or unforeseen classes</span></li><li><span>When there are several existing subclasses to be use, but it’s impractical to adapt their interface by subclassing every one.  An object adapter can adapt the interface of its parent class.</span></li></ul><p>&nbsp;</p><p><span>5.结构</span></p><p><img src="img/5-7.png" referrerpolicy="no-referrer"></p><p><strong><span>Target</span></strong><span>: It defines the application-specific interface that Client uses directly.</span>
<strong><span>Adapter</span></strong><span>: It adapts the interface Adaptee to the Target interface.  It’s middle man.</span>
<strong><span>Adaptee</span></strong><span>: It defines an existing incompatible interface that needs adapting before using in application.</span>
<strong><span>Client</span></strong><span>: It is your application that works with Target interface.</span></p><p><span>目标:它定义了</span><strong><span>客户机直接使用</span></strong><span>的特定于应用程序的接口。</span>
<span>Adapter:将接口Adaptee适配到目标接口。这是</span><strong><span>中间人</span></strong><span>。</span>
<span>Adaptee:它定义了一个现有的</span><strong><span>不兼容接口</span></strong><span>，需要在应用程序中使用之前进行调整。</span>
<span>客户端:使用Target接口的应用程序。</span></p><p><span>5.Class Adapter 类适配器（Java无法实现）</span></p><p><span>There are two types of adapters, the object adapter, and the class adapter. So far, we have seen the example of the object adapter which use </span><strong><span>object’s composition</span></strong><span>, whereas, the class adapter relies on multiple inheritance to adapt one interface to another. </span></p><p><span>As Java does not support multiple inheritance, we cannot show you an example of multiple inheritance, but you can keep this in mind and may implement it in one of your favorite Object Oriented Language like c++ which supports multiple inheritance.</span></p><p><span>有两种类型的适配器，对象适配器和类适配器。到目前为止，我们已经看到了使用对象组合的</span><strong><span>对象适配器</span></strong><span>的例子，而</span><strong><span>类适配器依赖于多重继承</span></strong><span>来使一个接口适应另一个接口。由于</span><strong><span>Java不支持多重继承</span></strong><span>，所以我们无法向您展示多重继承的示例，但您可以记住这一点，并可以使用您最喜欢的支持多重继承的面向对象语言</span></p><p><span>要实现类适配器，适配器将从Target公开继承，从Adaptee私有继承。因此，adapter将是Target的子类型，而不是Adaptee的子类型。</span></p><p><img src="img/5-8.png" style="zoom: 67%;" /></p><p><span>6.实现</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Adaptee</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">interface</span> <span class="cm-def">AdvancedMediaPlayer</span> { </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">playVlc</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">fileName</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">playMp4</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">fileName</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Adapter</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">MediaAdapter</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable">AdvancedMediaPlayer</span> <span class="cm-variable">advancedMusicPlayer</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">public</span> <span class="cm-variable">MediaAdapter</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">audioType</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span>(<span class="cm-variable">audioType</span>.<span class="cm-variable">equalsIgnoreCase</span>(<span class="cm-string">"vlc"</span>) ){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">advancedMusicPlayer</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">VlcPlayer</span>(); &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  } <span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable">audioType</span>.<span class="cm-variable">equalsIgnoreCase</span>(<span class="cm-string">"mp4"</span>)){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">advancedMusicPlayer</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Mp4Player</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  } &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">play</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">audioType</span>, <span class="cm-variable-3">String</span> <span class="cm-variable">fileName</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span>(<span class="cm-variable">audioType</span>.<span class="cm-variable">equalsIgnoreCase</span>(<span class="cm-string">"vlc"</span>)){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">advancedMusicPlayer</span>.<span class="cm-variable">playVlc</span>(<span class="cm-variable">fileName</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  }<span class="cm-keyword">else</span> <span class="cm-keyword">if</span>(<span class="cm-variable">audioType</span>.<span class="cm-variable">equalsIgnoreCase</span>(<span class="cm-string">"mp4"</span>)){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">advancedMusicPlayer</span>.<span class="cm-variable">playMp4</span>(<span class="cm-variable">fileName</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Target</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">AudioPlayer</span> <span class="cm-keyword">implements</span> <span class="cm-variable">MediaPlayer</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-variable">MediaAdapter</span> <span class="cm-variable">mediaAdapter</span>; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">play</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">audioType</span>, <span class="cm-variable-3">String</span> <span class="cm-variable">fileName</span>) { &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">//播放 mp3 音乐文件的内置支持</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span>(<span class="cm-variable">audioType</span>.<span class="cm-variable">equalsIgnoreCase</span>(<span class="cm-string">"mp3"</span>)){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"Playing mp3 file. Name: "</span><span class="cm-operator">+</span> <span class="cm-variable">fileName</span>); &nbsp; &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  } </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">//mediaAdapter 提供了播放其他文件格式的支持</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">else</span> <span class="cm-keyword">if</span>(<span class="cm-variable">audioType</span>.<span class="cm-variable">equalsIgnoreCase</span>(<span class="cm-string">"vlc"</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">||</span> <span class="cm-variable">audioType</span>.<span class="cm-variable">equalsIgnoreCase</span>(<span class="cm-string">"mp4"</span>)){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">mediaAdapter</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">MediaAdapter</span>(<span class="cm-variable">audioType</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">mediaAdapter</span>.<span class="cm-variable">play</span>(<span class="cm-variable">audioType</span>, <span class="cm-variable">fileName</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">else</span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"Invalid media. "</span><span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">audioType</span> <span class="cm-operator">+</span> <span class="cm-string">" format not supported"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; } &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Client</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">AdapterPatternDemo</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-variable">main</span>(<span class="cm-variable-3">String</span>[] <span class="cm-variable">args</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">AudioPlayer</span> <span class="cm-variable">audioPlayer</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">AudioPlayer</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">audioPlayer</span>.<span class="cm-variable">play</span>(<span class="cm-string">"mp3"</span>, <span class="cm-string">"beyond the horizon.mp3"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">audioPlayer</span>.<span class="cm-variable">play</span>(<span class="cm-string">"mp4"</span>, <span class="cm-string">"alone.mp4"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">audioPlayer</span>.<span class="cm-variable">play</span>(<span class="cm-string">"vlc"</span>, <span class="cm-string">"far far away.vlc"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">audioPlayer</span>.<span class="cm-variable">play</span>(<span class="cm-string">"avi"</span>, <span class="cm-string">"mind me.avi"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1612px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1612px;"></div></div></div></pre><p>&nbsp;</p><h3 id='532-facade'><span>5.3.2 Facade</span></h3><p><span>1.概念</span></p><p><span>Facade pattern provides a unified interface to a set of interface in a subsystem and decouples a client from a subsystem</span></p><p><span>2.优点：</span></p><ul><li><span>It just provides a layer to the complex interfaces of the sub-system which makes it easier to use.</span></li><li><span>It decouples a client from a subsystem, which avoids tight coupling between the client and the subsystem. </span></li></ul><p><span>3.缺点：</span></p><p><span>不符合开闭原则，如果要改东西很麻烦，继承重写都不合适。</span></p><p><span>4.应用场景</span></p><ul><li><span>When you want to provide a simple interface to a complex subsystem.</span></li><li><span>When there are many dependencies between clients and the implementation classes of an abstraction.</span></li><li><span>When you need layer your subsystems, Use a facade to define an entry point to each subsystem level.    </span></li></ul><p><span>5.结构</span></p><p><img src="img/5-10.png" referrerpolicy="no-referrer"></p><p><span>Facade defines a new interface, whereas Adapter uses an old interface.     Remember that Adapter makes two existing interfaces work together as opposed to defining an entirely new one.</span></p><p><span>Facade定义了一个新接口，而Adapter使用了一个旧接口。请记住，Adapter使两个现有接口协同工作，而不是定义一个全新的接口。</span></p><p><span>6.实现</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//facade</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">ControlSystem</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Engine</span> <span class="cm-variable">engine</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Engine</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">GPS</span> <span class="cm-variable">gps</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">GPS</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">ElectronicDevice</span> <span class="cm-variable">electronicDevice</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">ElectronicDevice</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">powerOn</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">engine</span>.<span class="cm-variable">start</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">gps</span>.<span class="cm-variable">connect</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">electronicDevice</span>.<span class="cm-variable">turnOn</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">powerOff</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">engine</span>.<span class="cm-variable">stop</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">gps</span>.<span class="cm-variable">disconnect</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">electronicDevice</span>.<span class="cm-variable">turnOff</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">ElectronicDevice</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">turnOn</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"turn on the electronic devices"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">turnOff</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"turn off the electronic devices"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Engine</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">start</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"start the engine"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">stop</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"stop the engine"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">GPS</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">connect</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"connect the satellite"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">disconnect</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"disconnect the satellite"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Client</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-variable">main</span>(<span class="cm-variable-3">String</span>[] <span class="cm-variable">args</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ControlSystem</span> <span class="cm-variable">cs</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">ControlSystem</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">cs</span>.<span class="cm-variable">powerOff</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1430px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1430px;"></div></div></div></pre><p><span>7.总结</span></p><p><span>Adapter和Facade的共同点和不同点</span></p><ul><li><p><span>Adapter and Facade are both wrappers;     </span></p></li><li><p><span>But they are different kinds of wrappers. </span></p><p><span>The </span><strong><span>intent</span></strong><span> of Facade is to </span><strong><span>produce a simpler interface</span></strong><span>, and the intent of Adapter is to </span><strong><span>design to an existing interface.</span></strong><span>     </span></p><p><span>While Facade routinely </span><strong><span>wraps multiple objects</span></strong><span> and Adapter </span><strong><span>wraps a single object;</span></strong><span>     </span></p><p><span>Facade could front-end a single complex object and Adapter could wrap several legacy objects.</span></p></li></ul><h3 id='533-composite'><span>5.3.3 Composite</span></h3><p><span>1.概念</span></p><p><span>A Composite Pattern says that just &quot;</span><u><span>allow clients to </span><strong><span>operate in generic manner</span></strong><span> on objects that may or may not represent a hierarchy of objects</span></u><span>&quot;.</span></p><p><span>“允许客户端以通用的方式操作对象，这些对象可能表示也可能不表示对象的层次结构”</span></p><p><span>2.优点：</span></p><ul><li><span>It defines class hierarchies that contain primitive and complex objects.</span></li><li><span>It makes easier to you to add new kinds of components.</span></li><li><span>It provides flexibility of structure with manageable class or interface.</span></li></ul><p><span>3.缺点：</span></p><p>&nbsp;</p><p><strong><span>4.⭐应用场景</span></strong></p><ul><li><span>When you want to represent </span><strong><span>part-whole hierarchies of objects</span></strong><span>.</span></li><li><span>When you want clients to be able to </span><strong><span>ignore the difference between compositions of objects and individual objects.</span></strong><span> Clients will treat all objects in the composite structure uniformly.</span></li></ul><p><span>*当你想表示对象的部分-整体层次结构时。</span>
<span>*当你希望客户端能够</span><strong><span>忽略对象组合和单个对象之间的差异时</span></strong><span>。客户端将统一处理复合结构中的所有对象</span></p><p><span>5.结构</span></p><p><span>The formal definition of the Composite Pattern says that it allows you to compose objects into tree structures to represent part-whole hierarchies.</span></p><p><img src="img/5-11.png" referrerpolicy="no-referrer"></p><p><span>In Composite Pattern, </span><strong><span>elements with children</span></strong><span> are called as </span><strong><span>Node</span></strong><span>, and elements without children** are called as </span><strong><span>Leaf.</span></strong></p><p><span>组成：</span></p><ul><li><strong><span>Component:</span></strong><span> It declares interface for objects in composition and implements default behavior for the interface common to all classes as appropriate.  </span></li><li><strong><span>Leaf:</span></strong><span> It represents leaf objects that haven&#39;t children in composition.  It defines behavior for primitive objects in the composition.</span></li><li><strong><span>Composite:</span></strong><span> Defines behavior for components having children.  Stores child component.  Implements child related operations in the component interface.</span></li><li><strong><span>Client</span></strong><span>: Manipulates objects in the composition through the component interface.</span></li></ul><p><span>组件:它在组合中为</span><strong><span>对象声明接口</span></strong><span>，并适当地为所有类通用的接口</span><strong><span>实现默认行为</span></strong><span>。组件声明了一个用于</span><strong><span>访问和管理其子组件的接口</span></strong><span>。</span>
<span>叶子:表示组合中的叶子对象。树叶没有孩子。它定义了组合中基本对象的行为。</span>
<span>复合:定义具有子组件的行为。存储子组件。在组件接口中实现子相关操作。</span>
<span>客户端:通过组件接口操作组合中的对象。</span></p><p><span>6.实现</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Component</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">abstract</span> <span class="cm-keyword">class</span> <span class="cm-def">Organization</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">private</span> <span class="cm-variable-3">String</span> <span class="cm-variable">name</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">public</span> <span class="cm-variable-3">String</span> <span class="cm-variable">getName</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-variable">name</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">setName</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">name</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">this</span>.<span class="cm-variable">name</span> <span class="cm-operator">=</span> <span class="cm-variable">name</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">public</span> <span class="cm-keyword">abstract</span> <span class="cm-variable-3">void</span> <span class="cm-variable">display</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">depth</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">public</span> <span class="cm-keyword">abstract</span> <span class="cm-variable-3">void</span> <span class="cm-variable">add</span>(<span class="cm-variable">Organization</span> <span class="cm-variable">org</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">public</span> <span class="cm-keyword">abstract</span> <span class="cm-variable-3">void</span> <span class="cm-variable">remove</span>(<span class="cm-variable">Organization</span> <span class="cm-variable">org</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Composite 聚合了Organization</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Company</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Organization</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">Organization</span><span class="cm-operator">&gt;</span> <span class="cm-variable">list</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">ArrayList</span><span class="cm-operator">&lt;</span><span class="cm-variable">Organization</span><span class="cm-operator">&gt;</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">Company</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">name</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">super</span>.<span class="cm-variable">setName</span>(<span class="cm-variable">name</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">add</span>(<span class="cm-variable">Organization</span> <span class="cm-variable">org</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">list</span>.<span class="cm-variable">add</span>(<span class="cm-variable">org</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">remove</span>(<span class="cm-variable">Organization</span> <span class="cm-variable">org</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">list</span>.<span class="cm-variable">remove</span>(<span class="cm-variable">org</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">display</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">depth</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">StringBuilder</span> <span class="cm-variable">temp</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable-3">StringBuilder</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">temp</span>.<span class="cm-variable">append</span>(<span class="cm-string">"-"</span>.<span class="cm-variable">repeat</span>(<span class="cm-variable">Math</span>.<span class="cm-variable">max</span>(<span class="cm-number">0</span>, <span class="cm-variable">depth</span>)));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">temp</span> <span class="cm-operator">+</span> <span class="cm-keyword">this</span>.<span class="cm-variable">getName</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable">Organization</span> <span class="cm-variable">organization</span> : <span class="cm-variable">list</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">organization</span>.<span class="cm-variable">display</span>(<span class="cm-variable">depth</span> <span class="cm-operator">+</span> <span class="cm-number">2</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Leaf</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">FinancialDepartment</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Organization</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">FinancialDepartment</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">name</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">super</span>.<span class="cm-variable">setName</span>(<span class="cm-variable">name</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">display</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">depth</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">StringBuilder</span> <span class="cm-variable">temp</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable-3">StringBuilder</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">temp</span>.<span class="cm-variable">append</span>(<span class="cm-string">"-"</span>.<span class="cm-variable">repeat</span>(<span class="cm-variable">Math</span>.<span class="cm-variable">max</span>(<span class="cm-number">0</span>, <span class="cm-variable">depth</span>)));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">temp</span> <span class="cm-operator">+</span> <span class="cm-keyword">this</span>.<span class="cm-variable">getName</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">add</span>(<span class="cm-variable">Organization</span> <span class="cm-variable">org</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// TODO Auto-generated method stub</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">remove</span>(<span class="cm-variable">Organization</span> <span class="cm-variable">org</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// TODO Auto-generated method stub</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Lleaf</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">HRDepartment</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Organization</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">HRDepartment</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">name</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">super</span>.<span class="cm-variable">setName</span>(<span class="cm-variable">name</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">display</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">depth</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">StringBuilder</span> <span class="cm-variable">temp</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable-3">StringBuilder</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">temp</span>.<span class="cm-variable">append</span>(<span class="cm-string">"-"</span>.<span class="cm-variable">repeat</span>(<span class="cm-variable">Math</span>.<span class="cm-variable">max</span>(<span class="cm-number">0</span>, <span class="cm-variable">depth</span>)));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">temp</span> <span class="cm-operator">+</span> <span class="cm-keyword">this</span>.<span class="cm-variable">getName</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">add</span>(<span class="cm-variable">Organization</span> <span class="cm-variable">org</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// TODO Auto-generated method stub</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">remove</span>(<span class="cm-variable">Organization</span> <span class="cm-variable">org</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// TODO Auto-generated method stub</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Client</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-variable">main</span>(<span class="cm-variable-3">String</span>[] <span class="cm-variable">args</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Organization</span> <span class="cm-variable">beijingCom</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Company</span>(<span class="cm-string">"下北泽茶业北京分公司"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Organization</span> <span class="cm-variable">nanjingCom</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Company</span>(<span class="cm-string">"下北泽茶业南京总部"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Organization</span> <span class="cm-variable">shanghaiCom</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Company</span>(<span class="cm-string">"下北泽茶业上海分公司"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Organization</span> <span class="cm-variable">beijingHDep</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">HRDepartment</span>(<span class="cm-string">"下北泽茶业北京人事部"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Organization</span> <span class="cm-variable">nanjingHDep</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">HRDepartment</span>(<span class="cm-string">"下北泽茶业南京人事部"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Organization</span> <span class="cm-variable">nanjingFDep</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">FinancialDepartment</span>(<span class="cm-string">"下北泽茶业南京会计部"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Organization</span> <span class="cm-variable">shanghaiFDDep</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">FinancialDepartment</span>(<span class="cm-string">"下北泽茶业上海会计部"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">beijingCom</span>.<span class="cm-variable">add</span>(<span class="cm-variable">beijingHDep</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">nanjingCom</span>.<span class="cm-variable">add</span>(<span class="cm-variable">nanjingHDep</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">nanjingCom</span>.<span class="cm-variable">add</span>(<span class="cm-variable">nanjingFDep</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">shanghaiCom</span>.<span class="cm-variable">add</span>(<span class="cm-variable">shanghaiFDDep</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">beijingCom</span>.<span class="cm-variable">add</span>(<span class="cm-variable">shanghaiCom</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">beijingCom</span>.<span class="cm-variable">add</span>(<span class="cm-variable">nanjingCom</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">beijingCom</span>.<span class="cm-variable">display</span>(<span class="cm-number">0</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 3120px;"></div><div class="CodeMirror-gutters" style="display: none; height: 3120px;"></div></div></div></pre><h3 id='534-bridge'><span>5.3.4 Bridge</span></h3><p><span>1.概念</span></p><p><span>A Bridge Pattern says that &quot;</span><u><strong><span>decouple the functional abstraction</span></strong><span> from the implementation so that the two can vary independently</span></u><span>&quot;.</span></p><p><span>桥接模式表示“将功能抽象与实现解耦，以便两者可以独立变化”。</span></p><p><span>2.优点：</span></p><ul><li><span>It enables the separation of implementation from the interface.</span></li><li><span>It improves the extensibility.</span></li><li><span>It allows the hiding of implementation details from the client.</span></li></ul><p><span>它使实现与接口分离。</span>
<span>提高了扩展性。</span>
<span>它允许对客户端隐藏实现细节</span></p><p><span>3.缺点：</span></p><p>&nbsp;</p><p><span>4.应用场景</span></p><p>&nbsp;</p><p>&nbsp;</p><p><span>5.结构</span></p><p><img src="img/5-12.png" referrerpolicy="no-referrer"></p><p><span>组成：</span></p><ul><li><strong><span>Abstraction</span></strong><span>: It defined the abstract interface i.e. behavior part. It also maintains the Implementer reference.</span></li><li><strong><span>RefinedAbstraction</span></strong><span>: It extends the interface defined by Abstraction.</span></li><li><strong><span>Implementer</span></strong><span>: It defines the interface for implementation classes. This interface does not need to correspond directly to abstraction interface and can be very different. Abstraction imp provides an implementation in terms of operations provided by Implementer interface.</span></li><li><strong><span>ConcreteImplementor</span></strong><span>: It implements the Implementer interface.</span></li></ul><p><span>Abstraction定义了抽象的接口，还维护了对实现者类型对象的引用，抽象和实现者之间的链接称为桥接。</span>
<span>RefinedAbstraction扩展了由抽象定义的接口。</span>
<span>Implementer为实现类(具体的实现者)提供接口。</span>
<span>Concrete Implementer实现了Implementer接口并定义了它的具体实现。</span></p><p><span>桥接模式解耦了接口和实现。因此，实现不会永久地绑定到接口。抽象的实现可以在运行时配置。它还消除了对实现的编译时依赖。更改实现类并不需要重新编译抽象类及其客户端。客户只需要知道抽象，你可以对他们隐藏实现。</span></p><p><span>6.实现</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Abstraction</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">abstract</span> <span class="cm-keyword">class</span> <span class="cm-def">Transport</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Size</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable">Usage</span> <span class="cm-variable">usage</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable">Size</span> <span class="cm-variable">size</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">abstract</span> <span class="cm-variable-3">void</span> <span class="cm-variable">show</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">Usage</span> <span class="cm-variable">getUsage</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">usage</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">setUsage</span>(<span class="cm-variable">Usage</span> <span class="cm-variable">usage</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">usage</span> <span class="cm-operator">=</span> <span class="cm-variable">usage</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">Size</span> <span class="cm-variable">getSize</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">size</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">setSize</span>(<span class="cm-variable">Size</span> <span class="cm-variable">size</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">size</span> <span class="cm-operator">=</span> <span class="cm-variable">size</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Implemtator</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">abstract</span> <span class="cm-keyword">class</span> <span class="cm-def">Size</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable-3">String</span> <span class="cm-variable">name</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">String</span> <span class="cm-variable">getName</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">name</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">setName</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">name</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">name</span> <span class="cm-operator">=</span> <span class="cm-variable">name</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Implemtator</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">abstract</span> <span class="cm-keyword">class</span> <span class="cm-def">Usage</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable-3">String</span> <span class="cm-variable">name</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">String</span> <span class="cm-variable">getName</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">name</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">setName</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">name</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">name</span> <span class="cm-operator">=</span> <span class="cm-variable">name</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//RefinedAbstraction</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Car</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Transport</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">Car</span>(<span class="cm-variable">Usage</span> <span class="cm-variable">usage</span>, <span class="cm-variable">Size</span> <span class="cm-variable">size</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">setUsage</span>(<span class="cm-variable">usage</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">setSize</span>(<span class="cm-variable">size</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">show</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-keyword">this</span>.<span class="cm-variable">getSize</span>().<span class="cm-variable">getName</span>() <span class="cm-operator">+</span> <span class="cm-keyword">this</span>.<span class="cm-variable">getUsage</span>().<span class="cm-variable">getName</span>() <span class="cm-operator">+</span> <span class="cm-string">"Car"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//RefinedAbstraction</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Plane</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Transport</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">Plane</span>(<span class="cm-variable">Usage</span> <span class="cm-variable">usage</span>, <span class="cm-variable">Size</span> <span class="cm-variable">size</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">setUsage</span>(<span class="cm-variable">usage</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">setSize</span>(<span class="cm-variable">size</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">show</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-keyword">this</span>.<span class="cm-variable">getUsage</span>().<span class="cm-variable">getName</span>() <span class="cm-operator">+</span> <span class="cm-string">"Plane"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//ConcreteImplemtator Size1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">BigSize</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Size</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">BigSize</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">setName</span>(<span class="cm-string">"Big Size"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//ConcreteImplemtator Size2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">SmallSize</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Size</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">SmallSize</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">setName</span>(<span class="cm-string">"Small Size"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//ConcreteImplemtator Usage1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">ArmyUse</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Usage</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">ArmyUse</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">setName</span>(<span class="cm-string">"Army Use"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//ConcreteImplemtator Usage2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">PassengerUse</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Usage</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">PassengerUse</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">setName</span>(<span class="cm-string">"Passenger Use"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Client</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-variable">main</span>(<span class="cm-variable-3">String</span>[] <span class="cm-variable">args</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Transport</span> <span class="cm-variable">trans</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Trunk</span>(<span class="cm-keyword">new</span> <span class="cm-variable">ArmyUse</span>(), <span class="cm-keyword">new</span> <span class="cm-variable">SmallSize</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">trans</span>.<span class="cm-variable">show</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 2730px;"></div><div class="CodeMirror-gutters" style="display: none; height: 2730px;"></div></div></div></pre><p>&nbsp;</p><h3 id='535-decorator'><span>5.3.5 Decorator</span></h3><p><span>1.概念</span></p><p><span>A Decorator Pattern says that just &quot;</span><strong><span>attach a flexible additional responsibilities to an object dynamically</span></strong><span>&quot;.</span></p><p><span>In other words, The Decorator Pattern </span><strong><span>uses composition instead of inheritance</span></strong><span> to extend the functionality of an object at runtime.</span></p><p><span>2.优点：</span></p><ul><li><span>It provides greater flexibility than static inheritance.</span></li><li><span>It enhances the extensibility of the object, because changes are made by coding new classes.</span></li><li><span>It simplifies the coding by allowing you to develop a series of functionality from targeted classes instead of coding all of the behavior into the object.</span></li></ul><p><span>它提供了比静态继承更大的灵活性。</span>
<span>它增强了对象的可扩展性，因为通过编写新的类来进行更改。</span>
<span>它简化了编码，允许您从目标类开发一系列功能，而不是将所有行为编码到对象中。</span></p><p><span>3.缺点：</span></p><p>&nbsp;</p><p><span>4.应用场景</span></p><ul><li><span>To add responsibilities to individual objects dynamically and transparently, that is, without affecting other objects.</span></li><li><span>For responsibilities that can be withdrawn.</span></li><li><span>When extension by sub-classing is impractical. Sometimes a large number of independent extensions are possible and would produce an explosion of subclasses to support every combination. </span></li></ul><p><span>5.结构</span></p><ul><li><span>The Decorator object is designed to have the same interface as the underlying object. </span></li><li><span>The Decorator object contains a reference to the actual object.</span></li><li><span>The Decorator object adds some additional functionality before or after forwarding requests to the underlying object. </span></li></ul><p><span>Decorator对象被设计为具有与底层对象相同的接口。这允许客户端对象以与底层实际对象完全相同的方式与Decorator对象进行交互。</span></p><p><span>Decorator对象包含对实际对象的引用。</span></p><p><span>Decorator对象接收来自客户端的所有请求(调用)。然后，它将这些调用转发给底层对象。Decorator对象在向底层对象转发请求之前或之后添加了一些附加功能。这确保了可以在运行时从外部向给定对象添加额外的功能，而无需修改其结构。</span></p><p><img src="img/5-13.png" referrerpolicy="no-referrer"></p><p>&nbsp;</p><p><span>6.实现</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Component</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">abstract</span> <span class="cm-keyword">class</span> <span class="cm-def">Component</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable-3">String</span> <span class="cm-variable">name</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">String</span> <span class="cm-variable">getName</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">name</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">setName</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">name</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">name</span> <span class="cm-operator">=</span> <span class="cm-variable">name</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">abstract</span> <span class="cm-variable-3">double</span> <span class="cm-variable">getPrice</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">bid</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-keyword">this</span>.<span class="cm-variable">getName</span>() <span class="cm-operator">+</span> <span class="cm-keyword">this</span>.<span class="cm-variable">getPrice</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//ConcreteComponent</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">MainBody</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Component</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">MainBody</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">setName</span>(<span class="cm-string">"main body"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">double</span> <span class="cm-variable">getPrice</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-number">100000</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Decorator</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">abstract</span> <span class="cm-keyword">class</span> <span class="cm-def">Decorator</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Component</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">abstract</span> <span class="cm-variable-3">String</span> <span class="cm-variable">getName</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//ConcreteDecorator A</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">GPS</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Decorator</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable">Component</span> <span class="cm-variable">comp</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">GPS</span>(<span class="cm-variable">Component</span> <span class="cm-variable">comp</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">comp</span> <span class="cm-operator">=</span> <span class="cm-variable">comp</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">String</span> <span class="cm-variable">getName</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">comp</span>.<span class="cm-variable">getName</span>() <span class="cm-operator">+</span> <span class="cm-string">"-GPS:"</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">double</span> <span class="cm-variable">getPrice</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">comp</span>.<span class="cm-variable">getPrice</span>() <span class="cm-operator">+</span> <span class="cm-number">8000</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//ConcreteDecorator B</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Lamp</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Decorator</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable">Component</span> <span class="cm-variable">comp</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">Lamp</span>(<span class="cm-variable">Component</span> <span class="cm-variable">comp</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">comp</span> <span class="cm-operator">=</span> <span class="cm-variable">comp</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">String</span> <span class="cm-variable">getName</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">comp</span>.<span class="cm-variable">getName</span>() <span class="cm-operator">+</span> <span class="cm-string">"-Lamp"</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">double</span> <span class="cm-variable">getPrice</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">comp</span>.<span class="cm-variable">getPrice</span>() <span class="cm-operator">+</span> <span class="cm-number">5000</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Client</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-variable">main</span>(<span class="cm-variable-3">String</span>[] <span class="cm-variable">args</span>) <span class="cm-keyword">throws</span> <span class="cm-variable">IOException</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Component</span> <span class="cm-variable">mainBody</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">GPS</span>(<span class="cm-keyword">new</span> <span class="cm-variable">Lamp</span>(<span class="cm-keyword">new</span> <span class="cm-variable">MainBody</span>()));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">mainBody</span>.<span class="cm-variable">bid</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 2054px;"></div><div class="CodeMirror-gutters" style="display: none; height: 2054px;"></div></div></div></pre><p><span>7.Decorator与Composite的区别</span></p><p><span>相同点：</span></p><p><span>Composite and Decorator have similar structure diagrams, reflecting the fact that both rely on recursive composition to organize an open-ended number of objects.</span></p><p><span>不同点：</span></p><ul><li><span>A Decorator can be viewed as a degenerate Composite with only one component. However, a Decorator isn&#39;t intended for object aggregation.</span></li><li><span>Decorator is designed to let you add responsibilities to objects without subclassing.   Composite&#39;s focus is not on embellishment but on representation.   </span></li></ul><h3 id='536-proxy'><span>5.3.6 Proxy</span></h3><p><span>1.概念</span></p><p><span>A Proxy Pattern &quot;</span><strong><span>provides the control for accessing the original object</span></strong><span>&quot;.</span></p><p><span>代理模式“为访问原始对象提供了控制”</span></p><p><span>2.优点：</span></p><p><span>The Proxy Pattern provides the protection to the original object from the outside world. It is used to create a representative object that controls access to another object.</span></p><p><span>3.缺点：</span></p><p>&nbsp;</p><p><span>4.应用场景</span></p><ul><li><span>A remote proxy provides a local representative for an object in a different address space.</span></li><li><span>A virtual proxy creates expensive objects on demand.</span></li><li><span>A protection proxy controls access to the original object.  Protection proxies are useful when objects should have different access rights.</span></li></ul><p><span>远程代理为不同地址空间中的对象提供本地代表。</span>
<span>虚拟代理按需创建昂贵的对象。</span>
<span>保护代理控制对原始对象的访问。当对象应该具有不同的访问权限时，保护代理非常有用。</span></p><p><span>5.结构</span></p><p><span>In the Proxy Pattern, a client does not directly talk to the original object, it delegates it calls to the proxy object which calls the methods of the original object. </span></p><p><span>在代理模式中，客户端不直接与原始对象对话，而是将其调用委托给代理对象，由代理对象调用原始对象的方法。</span></p><p><img src="img/5-14.png" referrerpolicy="no-referrer"></p><p><span>组成：</span></p><p><strong><span>Proxy</span></strong><span>: </span><u><span>Maintains a reference that lets the proxy access the real subject</span></u><span>. </span><em><span>Proxy</span></em><span> may </span><strong><span>refer to a Subject</span></strong><span> if the </span><em><span>RealSubject</span></em><span> and </span><em><span>Subject</span></em><span> interfaces are the same. Provides an interface </span><strong><span>identical</span></strong><span> to </span><em><span>Subject’s</span></em><span> so that a proxy can be substituted for the real subject. Controls access to the real subject and may be responsible for creating and deleting it.</span></p><p><strong><span>Subject</span></strong><span>: Defines the common interface for </span><em><span>RealSubject</span></em><span> and </span><em><span>Proxy</span></em><span> so that a </span><em><span>Proxy</span></em><span> can be used anywhere a </span><em><span>RealSubject</span></em><span> is expected.</span></p><p><strong><span>RealSubject</span></strong><span>: Defines the real object that the proxy represents.</span></p><p><span>6.三种变体</span></p><ul><li><span>A remote proxy provides a local representative for an object in a different address space.</span></li><li><span>A virtual proxy creates expensive objects on demand.</span></li><li><span>A protection proxy controls access to the original object.  Protection proxies are useful when objects should have different access rights.</span></li></ul><p><span>•远程代理为不同地址空间中的对象提供本地代表。</span>
<span>•虚拟代理按需创建昂贵的对象。</span>
<span>•保护代理控制对原始对象的访问。当对象应该具有不同的访问权限时，保护代理非常有用。</span></p><p><span>6.实现</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Subject</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">interface</span> <span class="cm-def">Sell</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">void</span> <span class="cm-variable">sellCar</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Proxy</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">CarStore</span> <span class="cm-keyword">implements</span> <span class="cm-variable">Sell</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">private</span> <span class="cm-variable">CarFactory</span> <span class="cm-variable">carFactory</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">public</span> <span class="cm-variable">CarStore</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">carFactory</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">CarFactory</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">sellCar</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"汽车宣传"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">carFactory</span>.<span class="cm-variable">sellCar</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"汽车维护保养"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//RealObject</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">CarFactory</span> <span class="cm-keyword">implements</span> <span class="cm-variable">Sell</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">sellCar</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"造汽车"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Client</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-variable">main</span>(<span class="cm-variable-3">String</span>[] <span class="cm-variable">args</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Sell</span> <span class="cm-variable">sell</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">CarStore</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">sell</span>.<span class="cm-variable">sellCar</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 910px;"></div><div class="CodeMirror-gutters" style="display: none; height: 910px;"></div></div></div></pre><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><h2 id='54-⭐behavioral-design-pattern'><span>5.4 ⭐Behavioral Design Pattern</span></h2><h3 id='541-command'><span>5.4.1 Command</span></h3><p><span>1.概念</span></p><p><span>A Command Pattern says that &quot;encapsulate a request under an object as a command and pass it to invoker object.  Invoker object looks for the appropriate object which can handle this command and pass the command to the corresponding object and that object executes the command&quot;.</span></p><p><span>命令模式表示“将请求封装在对象下作为命令，并将其传递给调用者对象。对象查找能够处理此命令的适当对象，并将该命令传递给相应的对象，然后该对象执行该命令。</span></p><p><span>2.优点：</span></p><ul><li><span>It separates the object that invokes the operation from the object that actually performs the operation.</span></li><li><span>It makes easy to add new commands, because existing classes remain unchanged.</span></li></ul><p>&nbsp;</p><p><span>3.缺点：</span></p><p>&nbsp;</p><p><span>4.应用场景</span></p><ul><li><span>Parameterize objects by an action to perform.</span></li><li><span>Specify, queue, and execute requests at different times. </span></li><li><span>Support undo. </span></li><li><span>Support logging changes so that they can be reapplied in case of a system crash. </span></li><li><span>Structure a system around high-level operations built on primitives operations. </span></li></ul><p><span>5.结构</span></p><p><img src="img/5-15.png" referrerpolicy="no-referrer"></p><p><span>组成：</span></p><p><strong><span>Command</span></strong><span>: Declares an interface for executing an operation.</span></p><p><strong><span>ConcreteCommand</span></strong><span>: Defines a binding between a Receiver object and an action. Implements Execute by invoking the corresponding operation(s) on Receiver.</span></p><p><strong><span>Client</span></strong><span>: Creates a ConcreteCommand object and sets its receiver.</span></p><p><strong><span>Invoker</span></strong><span>: Asks the command to carry out the request.</span></p><p><strong><span>Receiver</span></strong><span>: Knows how to perform the operations associated with carrying out a request. Any class may serve as a Receiver.</span></p><p><span>6.实现</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Invoker</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">ControlSystem</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable">Stack</span><span class="cm-operator">&lt;</span><span class="cm-variable">Command</span><span class="cm-operator">&gt;</span> <span class="cm-variable">undoCommands</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Stack</span><span class="cm-operator">&lt;</span><span class="cm-variable">Command</span><span class="cm-operator">&gt;</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable">Stack</span><span class="cm-operator">&lt;</span><span class="cm-variable">Command</span><span class="cm-operator">&gt;</span> <span class="cm-variable">redoCommands</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Stack</span><span class="cm-operator">&lt;</span><span class="cm-variable">Command</span><span class="cm-operator">&gt;</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">execute</span>(<span class="cm-variable">Command</span> <span class="cm-variable">command</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">command</span>.<span class="cm-variable">execute</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">undoCommands</span>.<span class="cm-variable">push</span>(<span class="cm-variable">command</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">undo</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-operator">!</span><span class="cm-variable">undoCommands</span>.<span class="cm-variable">isEmpty</span>()) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Command</span> <span class="cm-variable">command</span> <span class="cm-operator">=</span> <span class="cm-variable">undoCommands</span>.<span class="cm-variable">pop</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">command</span>.<span class="cm-variable">undo</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">redoCommands</span>.<span class="cm-variable">push</span>(<span class="cm-variable">command</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">redo</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-operator">!</span><span class="cm-variable">redoCommands</span>.<span class="cm-variable">isEmpty</span>()) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Command</span> <span class="cm-variable">command</span> <span class="cm-operator">=</span> <span class="cm-variable">redoCommands</span>.<span class="cm-variable">pop</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">command</span>.<span class="cm-variable">execute</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">undoCommands</span>.<span class="cm-variable">push</span>(<span class="cm-variable">command</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Command</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">interface</span> <span class="cm-def">Command</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">void</span> <span class="cm-variable">execute</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">void</span> <span class="cm-variable">undo</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//ConcreteCommand</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">PowerCommand</span> <span class="cm-keyword">implements</span> <span class="cm-variable">Command</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable">Car</span> <span class="cm-variable">car</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Car</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">execute</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">car</span>.<span class="cm-variable">turnOn</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">undo</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">car</span>.<span class="cm-variable">turnOff</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//ConcreteCommand</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">SpeedCommand</span> <span class="cm-keyword">implements</span> <span class="cm-variable">Command</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable">Car</span> <span class="cm-variable">car</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Car</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">execute</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">car</span>.<span class="cm-variable">accelerate</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">undo</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">car</span>.<span class="cm-variable">decelerate</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Receiver</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Car</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">turnOn</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"car is turn on"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">turnOff</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"car is turn off"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">accelerate</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"car is accelerating"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">decelerate</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"car is decelerating"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Client</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-variable">main</span>(<span class="cm-variable-3">String</span>[] <span class="cm-variable">args</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ControlSystem</span> <span class="cm-variable">cs</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">ControlSystem</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Command</span> <span class="cm-variable">pc</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">PowerCommand</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Command</span> <span class="cm-variable">sc</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">SpeedCommand</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">cs</span>.<span class="cm-variable">execute</span>(<span class="cm-variable">sc</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">cs</span>.<span class="cm-variable">undo</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">cs</span>.<span class="cm-variable">redo</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 2418px;"></div><div class="CodeMirror-gutters" style="display: none; height: 2418px;"></div></div></div></pre><h3 id='542-observer'><span>5.4.2 Observer</span></h3><p><span>1.概念</span></p><p><span>An Observer Pattern says that &quot;</span><strong><span>just define a one-to-one dependency so that when one object changes state, all its dependents are notified and updated automatically</span></strong><span>&quot;.</span></p><p><span>观察者模式说“只要定义一个一对一的依赖关系，当一个对象改变状态时，它的所有依赖关系都会被自动通知和更新”。</span></p><p><span>2.优点：</span></p><ul><li><span>It describes the coupling between the objects and the observer.</span></li><li><span>It provides the support for broadcast-type communication.</span></li></ul><p><span>3.缺点：</span></p><p>&nbsp;</p><p><span>4.应用场景</span></p><ul><li><span>When an abstraction has two aspects, one dependent on the other. Encapsulating these aspects in separate objects lets you vary and reuse them independently.</span></li><li><span>When a change to one object requires changing others, and you don’t know how many objects need to be changed.</span></li><li><span>When an object should be able to notify other objects without making assumptions about who these objects are. In other words, you don’t want these objects tightly coupled.</span></li></ul><p><span>当一个抽象有两个方面，一个依赖于另一个。将这些方面封装在单独的对象中，可以独立地更改和重用它们。</span>
<span>当改变一个对象需要改变其他对象时，你不知道需要改变多少对象。</span>
<span>当一个对象应该能够通知其他对象，而不需要假设这些对象是谁。换句话说，您不希望这些对象紧密耦合。</span></p><p><span>5.结构</span></p><p><img src="img/5-16.png" referrerpolicy="no-referrer"></p><ul><li><strong><span>Subject</span></strong><span>, which is used to </span><strong><span>register observers</span></strong><span>. Objects use this interface to register as observers and also to remove themselves from being observers.</span></li><li><strong><span>Observer</span></strong><span>, defines an updating interface for objects that should be notified of changes in a subject. All observers need to implement the </span><em><span>Observer</span></em><span> interface. This interface has a method </span><em><span>update</span></em><span>() , which gets called when the </span><em><span>Subject’s</span></em><span> state changes.</span></li><li><strong><span>ConcreteSubject</span></strong><span>, stores the state of interest to </span><em><span>ConcreteObserver</span></em><span> objects. It sends a notification to its observers when its state changes. A concrete subject always implements the Subject interface. The </span><em><span>notifyObservers</span></em><span>() method is used to update all the current observers whenever the state changes.</span></li><li><strong><span>ConcreateObserver</span></strong><span>, maintains a reference to a </span><em><span>ConcreteSubject</span></em><span> object and implements the Observer interface. Each observer registers with a concrete subject to receive updates.</span></li></ul><p>&nbsp;</p><p><span>6.实现</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Subject</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">interface</span> <span class="cm-def">CarStore</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">void</span> <span class="cm-variable">register</span>(<span class="cm-variable">Observable</span> <span class="cm-variable">obs</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">void</span> <span class="cm-variable">remove</span>(<span class="cm-variable">Observable</span> <span class="cm-variable">obs</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">void</span> <span class="cm-variable">sendNotice</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">message</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//ConcreteSubject</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">BenzCarStore</span> <span class="cm-keyword">implements</span> <span class="cm-variable">CarStore</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-keyword">final</span> <span class="cm-variable">List</span><span class="cm-operator">&lt;</span><span class="cm-variable">Observable</span><span class="cm-operator">&gt;</span> <span class="cm-variable">list</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">ArrayList</span><span class="cm-operator">&lt;&gt;</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">register</span>(<span class="cm-variable">Observable</span> <span class="cm-variable">obs</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">list</span>.<span class="cm-variable">add</span>(<span class="cm-variable">obs</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">remove</span>(<span class="cm-variable">Observable</span> <span class="cm-variable">obs</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">list</span>.<span class="cm-variable">remove</span>(<span class="cm-variable">obs</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">sendNotice</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">message</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable">Observable</span> <span class="cm-variable">item</span> : <span class="cm-variable">list</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">item</span>.<span class="cm-variable">notice</span>(<span class="cm-variable">message</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Observer</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">interface</span> <span class="cm-def">Observable</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">void</span> <span class="cm-variable">notice</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">message</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//ConcreteObserver</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Customer</span> <span class="cm-keyword">implements</span> <span class="cm-variable">Observable</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable-3">String</span> <span class="cm-variable">name</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">Customer</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">name</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">name</span> <span class="cm-operator">=</span> <span class="cm-variable">name</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">notice</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">message</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-keyword">this</span>.<span class="cm-variable">getName</span>() <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-string">", the"</span> <span class="cm-operator">+</span> <span class="cm-variable">message</span> <span class="cm-operator">+</span> <span class="cm-string">" now is available"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">String</span> <span class="cm-variable">getName</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">name</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">setName</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">name</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">name</span> <span class="cm-operator">=</span> <span class="cm-variable">name</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Client</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-variable">main</span>(<span class="cm-variable-3">String</span>[] <span class="cm-variable">args</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">CarStore</span> <span class="cm-variable">cs</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">BenzCarStore</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Observable</span> <span class="cm-variable">obs1</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Customer</span>(<span class="cm-string">"Tom"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Observable</span> <span class="cm-variable">obs2</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Customer</span>(<span class="cm-string">"Jerry"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">cs</span>.<span class="cm-variable">register</span>(<span class="cm-variable">obs1</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">cs</span>.<span class="cm-variable">register</span>(<span class="cm-variable">obs2</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">cs</span>.<span class="cm-variable">sendNotice</span>(<span class="cm-string">"AMT 45"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">cs</span>.<span class="cm-variable">remove</span>(<span class="cm-variable">obs1</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">cs</span>.<span class="cm-variable">sendNotice</span>(<span class="cm-string">"AMT 98"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1950px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1950px;"></div></div></div></pre><h3 id='543-strategy'><span>5.4.3 Strategy</span></h3><p><span>1.概念</span></p><p><span>A Strategy Pattern says that &quot;</span><strong><span>defines a family of functionality, encapsulate each one, and make them interchangeable</span></strong><span>&quot;.</span></p><p><span>策略模式说“定义一系列功能，封装每个功能，并使它们可互换”。</span></p><p><span>2.优点：</span></p><ul><li><span>It provides a substitute to subclassing.</span></li><li><span>It defines each behavior within its own class, eliminating the need for conditional statements.</span></li><li><span>It makes it easier to extend and incorporate new behavior without changing the application..</span></li></ul><p><span>它提供了子类化的替代品。</span>
<span>它在自己的类中定义每个行为，消除了条件语句的需要。</span>
<span>它使得在不改变应用程序的情况下更容易扩展和合并新的行为</span></p><p><span>3.缺点：</span></p><p>&nbsp;</p><p><span>4.应用场景</span></p><ul><li><span>When many related classes differ only in their behavior.</span></li><li><span>When you need different variants of an algorithm.</span></li><li><span>When an algorithm uses data that clients shouldn’t know about.</span></li><li><span>When a class defines many behaviors, and these appear as multiple conditional statements in its operations. </span></li></ul><p><span>5.结构</span></p><p><img src="img/5-17.png" referrerpolicy="no-referrer"></p><p><strong><span>Strategy</span></strong><span>: Declares an interface common to all supported algorithms. Context uses this interface to call the algorithm defined by a ConcreteStrategy.</span></p><p><strong><span>ConcreteStrategy</span></strong><span>: Implements the algorithm using the Strategy interface.</span></p><p><strong><span>Context</span></strong><span>: Context is configured with a ConcreteStrategy object and maintains a reference to a Strategy object. Context may define an interface that lets Strategy access its data.</span></p><p><span>Strategy:声明一个对所有支持算法都通用的接口。上下文使用此接口调用ConcreteStrategy定义的算法。</span>
<span>ConcreteStrategy:使用Strategy接口实现算法。</span>
<span>Context: Context使用ConcreteStrategy对象配置，并维护一个对Strategy对象的引用。上下文可以定义一个接口，允许策略访问其数据。</span></p><p><span>6.实现</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Context</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Car</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable-3">double</span> <span class="cm-variable">price</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable">PricePolicy</span> <span class="cm-variable">pricePolicy</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">Car</span>(<span class="cm-variable">PricePolicy</span> <span class="cm-variable">pricePolicy</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">pricePolicy</span> <span class="cm-operator">=</span> <span class="cm-variable">pricePolicy</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">double</span> <span class="cm-variable">getPrice</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">price</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">setPrice</span>(<span class="cm-variable-3">double</span> <span class="cm-variable">price</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">price</span> <span class="cm-operator">=</span> <span class="cm-variable">price</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">sell</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">pricePolicy</span>.<span class="cm-variable">getPrice</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;">}<span class="cm-tab" role="presentation" cm-text="	">   </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Strategy</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">abstract</span> <span class="cm-keyword">class</span> <span class="cm-def">PricePolicy</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable-3">double</span> <span class="cm-variable">basePrice</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">PricePolicy</span>(<span class="cm-variable-3">double</span> <span class="cm-variable">basePrice</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">basePrice</span> <span class="cm-operator">=</span> <span class="cm-variable">basePrice</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">double</span> <span class="cm-variable">getBasePrice</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">basePrice</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">setBasePrice</span>(<span class="cm-variable-3">double</span> <span class="cm-variable">basePrice</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">basePrice</span> <span class="cm-operator">=</span> <span class="cm-variable">basePrice</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">abstract</span> <span class="cm-variable-3">double</span> <span class="cm-variable">getPrice</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//ConcreteStrategy 5折 </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Price50</span> <span class="cm-keyword">extends</span> <span class="cm-variable">PricePolicy</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">Price50</span>(<span class="cm-variable-3">double</span> <span class="cm-variable">basePrice</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">super</span>(<span class="cm-variable">basePrice</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// TODO Auto-generated constructor stub</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">double</span> <span class="cm-variable">getPrice</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-keyword">this</span>.<span class="cm-variable">getBasePrice</span>() <span class="cm-operator">*</span> <span class="cm-number">0.5</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//ConcreteStrategy 98折 </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Price98</span> <span class="cm-keyword">extends</span> <span class="cm-variable">PricePolicy</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">Price98</span>(<span class="cm-variable-3">double</span> <span class="cm-variable">basePrice</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">super</span>(<span class="cm-variable">basePrice</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// TODO Auto-generated constructor stub</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">double</span> <span class="cm-variable">getPrice</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-keyword">this</span>.<span class="cm-variable">getBasePrice</span>() <span class="cm-operator">*</span> <span class="cm-number">0.98</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Client</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-variable">main</span>(<span class="cm-variable-3">String</span>[] <span class="cm-variable">args</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">PricePolicy</span> <span class="cm-variable">pricePolicy</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Price98</span>(<span class="cm-number">100000</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Car</span> <span class="cm-variable">car</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Car</span>(<span class="cm-variable">pricePolicy</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">car</span>.<span class="cm-variable">sell</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 2002px;"></div><div class="CodeMirror-gutters" style="display: none; height: 2002px;"></div></div></div></pre><h3 id='544-chain-of-responsibility'><span>5.4.4 Chain of Responsibility</span></h3><p><span>1.概念</span></p><p><span>A Chain of Responsibility Pattern says that just &quot;avoid coupling the sender of a request to its receiver by giving multiple objects a chance to handle the request&quot;.</span></p><p><span>责任链模式说的是“通过给多个对象处理请求的机会来避免请求的发送方和接收方耦合”。</span></p><p><span>2.优点：</span></p><ul><li><span>It reduces the coupling.</span></li><li><span>It adds flexibility while assigning the responsibilities to objects.</span></li><li><span>It allows a set of classes to act as one;  events produced in one class can be sent to other handler classes with the help of composition.</span></li></ul><p><span>减少耦合。</span>
<span>它在为对象分配职责时增加了灵活性。</span>
<span>它允许一组类作为一个; 在组合的帮助下，一个类中产生的事件可以发送到其他处理程序类。</span></p><p><span>3.缺点：</span></p><p>&nbsp;</p><p><span>4.应用场景</span></p><ul><li><span>When more than one objects may handle a request, and the handler isn’t known a priori. The handler should be ascertained automatically.</span></li><li><span>When you want to issue a request to one of several objects without specifying the receiver explicitly.</span></li><li><span>When the set of objects that can handle a request should be specified dynamically.</span></li></ul><p><span>可能有多个对象处理一个请求，而且处理程序是未知的。处理程序应该自动确定。</span>
<span>你想向几个对象中的一个发出请求，但不显式地指定接收者。</span>
<span>能够处理请求的对象集应该动态指定。</span></p><p><span>5.结构</span></p><p><span>When there is more than one objects that can handle or fulfill a client request, the pattern recommends giving each of these objects a chance to process the request in some sequential order.  Applying the pattern in such a case, each of these potential handlers can be arranged in the form of a chain, with each object having a reference to the next object in the chain.  The first object in the chain receives the request and decides either to handle the request or to pass it on to the next object in the chain.  The request flows through all objects in the chain one after the other until the request is handled by one of the handlers in the chain or the request reaches the end of the chain without getting processed.</span></p><p><span>当有多个对象可以处理或满足客户端请求时，该模式建议给每个对象以一定顺序处理请求的机会。在这种情况下应用该模式，每个潜在的处理程序都可以以链的形式排列，每个对象都有对链中下一个对象的引用。链中的第一个对象接收到请求，并决定是处理请求还是将其传递给链中的下一个对象。请求一个接一个地流经链中的所有对象，直到请求由链中的一个处理程序处理，或者请求到达链的末端而没有得到处理。</span></p><p><img src="img/5-18.png" referrerpolicy="no-referrer"></p><p><span>Handler:定义处理请求的接口，并可选地实现后续链接。</span>
<span>ConcreteHandler:处理它负责的请求。它可以访问它的继承者。如果ConcreteHandler可以处理请求，它就会这样做;否则，它将请求转发给它的后继程序。</span>
<strong><span>Client</span></strong><span>:向链上的ConcreteHandler对象发起请求。当客户端发出请求时，请求将沿着链传播，直到由ConcreteHandler对象负责处理它。</span></p><p>&nbsp;</p><p><span>6.实现</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Handler</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">abstract</span> <span class="cm-keyword">class</span> <span class="cm-def">Staff</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable">Staff</span> <span class="cm-variable">leader</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable-3">String</span> <span class="cm-variable">name</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">abstract</span> <span class="cm-variable-3">void</span> <span class="cm-variable">handleAbsent</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">name</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">days</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//ConcreteHandler 1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">TeamLeader</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Staff</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">handleAbsent</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">name</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">days</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">name</span>.<span class="cm-variable">equals</span>(<span class="cm-string">"lyb"</span>) <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">days</span> <span class="cm-operator">&lt;=</span> <span class="cm-number">3</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">name</span> <span class="cm-operator">+</span> <span class="cm-string">"请假"</span> <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">days</span> <span class="cm-operator">+</span> <span class="cm-string">"天，被组长批准"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">getLeader</span>().<span class="cm-variable">handleAbsent</span>(<span class="cm-variable">name</span>, <span class="cm-variable">days</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//ConcreteHandler 2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">DepartmentManager</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Staff</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">handleAbsent</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">name</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">days</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">name</span>.<span class="cm-variable">equals</span>(<span class="cm-string">"lyb"</span>) <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">days</span> <span class="cm-operator">&lt;=</span> <span class="cm-number">7</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">name</span> <span class="cm-operator">+</span> <span class="cm-string">"请假"</span> <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">days</span> <span class="cm-operator">+</span> <span class="cm-string">"天，被部门经理批准"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">getLeader</span>().<span class="cm-variable">handleAbsent</span>(<span class="cm-variable">name</span>, <span class="cm-variable">days</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//ConcreteHandler 3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">GeneralManager</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Staff</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">handleAbsent</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">name</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">days</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">name</span>.<span class="cm-variable">equals</span>(<span class="cm-string">"lyb"</span>) <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">days</span> <span class="cm-operator">&lt;=</span> <span class="cm-number">30</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">name</span> <span class="cm-operator">+</span> <span class="cm-string">"请假"</span> <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">days</span> <span class="cm-operator">+</span> <span class="cm-string">"天，被总经理批准"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">getLeader</span>().<span class="cm-variable">handleAbsent</span>(<span class="cm-variable">name</span>, <span class="cm-variable">days</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//ConcreteHandler 4</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Boss</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Staff</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">handleAbsent</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">name</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">days</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">name</span>.<span class="cm-variable">equals</span>(<span class="cm-string">"lyb"</span>) <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">days</span> <span class="cm-operator">&gt;=</span> <span class="cm-number">30</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">name</span> <span class="cm-operator">+</span> <span class="cm-string">"请假"</span> <span class="cm-operator">+</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">days</span> <span class="cm-operator">+</span> <span class="cm-string">"天，被Boss批准"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">getLeader</span>().<span class="cm-variable">handleAbsent</span>(<span class="cm-variable">name</span>, <span class="cm-variable">days</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Client</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-variable">main</span>(<span class="cm-variable-3">String</span>[] <span class="cm-variable">args</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Staff</span> <span class="cm-variable">tl</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">TeamLeader</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Staff</span> <span class="cm-variable">dm</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">DepartmentManager</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Staff</span> <span class="cm-variable">gm</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">GeneralManager</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">Staff</span> <span class="cm-variable">boss</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Boss</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">tl</span>.<span class="cm-variable">setLeader</span>(<span class="cm-variable">dm</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">dm</span>.<span class="cm-variable">setLeader</span>(<span class="cm-variable">gm</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">gm</span>.<span class="cm-variable">setLeader</span>(<span class="cm-variable">boss</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">tl</span>.<span class="cm-variable">handleAbsent</span>(<span class="cm-string">"lyb"</span>, <span class="cm-number">35</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1846px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1846px;"></div></div></div></pre><h3 id='545-template-method'><span>5.4.5 Template Method</span></h3><p><span>1.概念</span></p><p><span>A Template Pattern says that &quot;</span><strong><span>just define the skeleton of a function in an operation, deferring some steps to its subclasses</span></strong><span>&quot;.</span></p><p><span>2.优点：</span></p><p><span>It is very common technique for reusing the code.</span></p><p><span>3.缺点：</span></p><p>&nbsp;</p><p><span>4.应用场景</span></p><ul><li><span>To implement the invariant parts of an algorithm once and leave it up to subclasses to implement the behavior that can vary.</span></li><li><span>When common behavior among subclasses should be factored and localized in a common class to avoid code duplication. </span></li><li><span>To control subclasses extensions. </span></li></ul><p><span>5.结构</span></p><p><img src="img/5-19.png" referrerpolicy="no-referrer"></p><p><span>上图中的AbstractClass定义了抽象的基本操作，具体的子类定义这些操作来实现算法的步骤。它实现了一个定义算法框架的模板方法。模板方法调用基本操作以及AbstractClass中定义的操作或其他对象的操作。</span>
<span>ConcreteClass: 实现要携带的基本操作。</span></p><p><span>6.实现</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//AbstractClass</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">abstract</span> <span class="cm-keyword">class</span> <span class="cm-def">CarStore</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">abstract</span> <span class="cm-variable-3">void</span> <span class="cm-variable">clean</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">abstract</span> <span class="cm-variable-3">void</span> <span class="cm-variable">repair</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">abstract</span> <span class="cm-variable-3">void</span> <span class="cm-variable">discount</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">abstract</span> <span class="cm-variable-3">boolean</span> <span class="cm-variable">vip</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">final</span> <span class="cm-variable-3">void</span> <span class="cm-variable">carService</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">clean</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">repair</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">vip</span>()) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">discount</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">clean</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//ConcreteClass</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">BenzCarStore</span> <span class="cm-keyword">extends</span> <span class="cm-variable">CarStore</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">clean</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"clean benz car"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">repair</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"repair benz car"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">discount</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"discount benz car"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">boolean</span> <span class="cm-variable">vip</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">false</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1144px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1144px;"></div></div></div></pre><h3 id='546-state'><span>5.4.6 State</span></h3><p><span>1.概念</span></p><p><span>The intent of state design patterns includes:</span>
<span>	</span><span>Allow an object to alter its behavior when its internal state changes.  The object will appear to change its class.</span>
<span>	</span><span>An object-oriented state machine</span>
<span>	</span><span>wrapper + polymorphic wrappee + collaboration</span></p><p><span>状态设计模式的意图包括:</span>
<span>允许对象在其内部状态改变时改变其行为。对象看起来会改变它的类。</span>
<span>面向对象的状态机</span>
<span>包装+多态包装+协作</span></p><p><span>2.优点：</span></p><p>&nbsp;</p><p><span>3.缺点：</span></p><p>&nbsp;</p><p><span>4.应用场景</span></p><p><span>In the process of software development, </span><strong><span>some objects</span></strong><span> in the application may </span><strong><span>make different behaviors according to different situations</span></strong><span>.   We call this kind of object stateful object, and one or more dynamically changing attributes that affect the behavior of the object state.   When a stateful object interacts with external events, its internal state will change, so that its behavior will also change.</span></p><p><span>在软件开发过程中，应用程序中的某些对象可能会根据不同的情况做出不同的行为。我们称这种对象为有状态对象，一个或多个动态变化的属性会影响对象状态的行为。当有状态对象与外部事件交互时，其内部状态将发生变化，因此其行为也将发生变化。</span></p><p><span>For this stateful object programming, the traditional solution is to consider all these possible situations, and then use if else or switch case statements to judge the state, and then deal with different situations.   However, it is obvious that this method has natural disadvantages for complex state judgment.   The conditional judgment statements will be too bloated, poor readability, non extensible and difficult to maintain.   When adding a new state, a new if else statement should be added, which </span><strong><span>violates the &quot;opening and closing principle&quot;</span></strong><span> and is not conducive to the expansion of the program.</span></p><p><span>对于这种有状态对象编程，传统的解决方案是考虑所有这些可能的情况，然后使用if else或switch case语句来判断状态，然后处理不同的情况。但是，对于复杂状态的判断，这种方法显然存在天然的缺点。条件判断语句过于臃肿，可读性差，不可扩展，难以维护。在添加新状态时，需要添加新的if else语句，这违反了“开闭原则”，不利于程序的扩展。</span></p><p><span>5.结构</span></p><p><img src="img/5-20.png" referrerpolicy="no-referrer"></p><p>&nbsp;</p><p><span>6.实现</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//State</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">interface</span> <span class="cm-def">State</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">doAction</span>(<span class="cm-variable">Context</span> <span class="cm-variable">context</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//ConcreteState</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">StartState</span> <span class="cm-keyword">implements</span> <span class="cm-variable">State</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">doAction</span>(<span class="cm-variable">Context</span> <span class="cm-variable">context</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"Player is in start state"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">context</span>.<span class="cm-variable">setState</span>(<span class="cm-keyword">this</span>); </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">public</span> <span class="cm-variable-3">String</span> <span class="cm-variable">toString</span>(){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-string">"Start State"</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//ConcreteState</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">StopState</span> <span class="cm-keyword">implements</span> <span class="cm-variable">State</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">doAction</span>(<span class="cm-variable">Context</span> <span class="cm-variable">context</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"Player is in stop state"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">context</span>.<span class="cm-variable">setState</span>(<span class="cm-keyword">this</span>); </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">public</span> <span class="cm-variable-3">String</span> <span class="cm-variable">toString</span>(){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-string">"Stop State"</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//Context</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Context</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">private</span> <span class="cm-variable">State</span> <span class="cm-variable">state</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">public</span> <span class="cm-variable">Context</span>(){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">state</span> <span class="cm-operator">=</span> <span class="cm-atom">null</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">setState</span>(<span class="cm-variable">State</span> <span class="cm-variable">state</span>){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">this</span>.<span class="cm-variable">state</span> <span class="cm-operator">=</span> <span class="cm-variable">state</span>; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">public</span> <span class="cm-variable">State</span> <span class="cm-variable">getState</span>(){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">state</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Client</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; <span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span class="cm-variable">main</span>(<span class="cm-variable-3">String</span>[] <span class="cm-variable">args</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">Context</span> <span class="cm-variable">context</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Context</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">StartState</span> <span class="cm-variable">startState</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">StartState</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">startState</span>.<span class="cm-variable">doAction</span>(<span class="cm-variable">context</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">context</span>.<span class="cm-variable">getState</span>().<span class="cm-variable">toString</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">StopState</span> <span class="cm-variable">stopState</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">StopState</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">stopState</span>.<span class="cm-variable">doAction</span>(<span class="cm-variable">context</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">context</span>.<span class="cm-variable">getState</span>().<span class="cm-variable">toString</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1586px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1586px;"></div></div></div></pre><p>&nbsp;</p><p>&nbsp;</p><h1 id='6object-design'><span>6.Object Design</span></h1><h2 id='61-introduction'><span>6.1 Introduction</span></h2><h2 id='62-object-design-concepts'><span>6.2 Object Design Concepts</span></h2><h3 id='621-class-implementer-class-extender-and-class-user'><span>6.2.1 Class Implementer, Class Extender, and Class User</span></h3><ul><li><span>The class implementer is responsible for realizing the class under consideration.    Class implementers design the internal data structures and implement the code for each public operation.</span></li><li><span>The class user invokes the operations provided by the class under consideration during the realization of another class, called the client class.    For class users, the interface specification discloses the boundary of the class in terms of the services it provides and the assumptions it makes about the client class.</span></li><li><span>The class extender develops specializations of the class under consideration.    Like class implementers, class extenders may invoke operations provided by the class of interest, the class extenders focus on specialized versions of the same services.</span></li></ul><p><span>类实现者负责实现所考虑的类。类实现者设计内部数据结构并实现每个公共操作的代码。</span>
<span>类用户在实现另一个类(称为客户端类)时调用被考虑的类提供的操作。对于类用户，接口规范根据类提供的服务和它对客户端类所做的假设公开了类的边界。</span>
<span>类扩展器开发正在考虑的类的专门化。与类实现者一样，类扩展程序可以调用感兴趣的类提供的操作，类扩展程序关注相同服务的专门版本。</span></p><h3 id='622-types-signatures-and-visibility'><span>6.2.2 Types, Signatures, and Visibility</span></h3><p><span>UML定义了四个级别的可见性:</span></p><ul><li><span>• A private attribute can be accessed only by the class in which it is defined.  </span></li><li><span>• A protected attribute or operation can be accessed by the class in which it is defined and by any descendant of that class.   </span></li><li><span>• A public attribute or operation can be accessed by any class.   The set of public operations and attributes constitute the public interface of the class and is intended for the class user.</span></li><li><span>• An attribute or an operation with visibility package can be accessed by any class in the nearest enclosing package.   This visibility enables a set of related classes (for example, forming a subsystem) to share a set of attributes or operations without having to make them public to the entire system.</span></li></ul><p><span>在UML中，可见性是通过在属性或操作的名称前面加上字符符号来表示的:-表示私有，#表示受保护，+表示公共，或~表示包。例如，在图中，我们指定Tournament的maxNumPlayers属性是私有的，而所有的类操作都是公共的。</span></p><p><img src="img/6-1.png" referrerpolicy="no-referrer"></p><h3 id='623-contracts-invariants-preconditions-and-postconditions'><span>6.2.3 Contracts: Invariants, Preconditions, and Postconditions</span></h3><p><span>Contracts include three types of constraints:</span></p><ul><li><span>An </span><strong><span>invariant</span></strong><span> is a predicate that is always true for all instances of a class. Invariants are used to specify consistency constraints among class attributes.</span></li><li><span>A </span><strong><span>precondition</span></strong><span> is a predicate that must be true before an operation is invoked. Preconditions are used to specify constraints that a class user must meet before calling the operation.</span></li><li><span>A </span><strong><span>postcondition</span></strong><span> is a predicate that must be true after an operation is invoked. Postconditions are used to specify constraints that the class implementer and the class extender must ensure after the invocation of the operation.</span></li></ul><p><strong><span>常量</span></strong><span>是一个谓词，对于类的所有实例始终为真。常量是与类或接口相关联的约束。常量用于指定类属性之间的一致性约束。</span>
<strong><span>前置条件</span></strong><span>是在调用操作之前必须为真的谓词。前提条件与特定的操作相关联。前提条件用于指定类用户在调用操作之前必须满足的约束。</span>
<strong><span>后置条件</span></strong><span>是一个谓词，在操作被调用后必须为真。后置条件用于指定类实现者和类扩展者在调用操作后必须确保的约束。</span></p><h3 id='624-⭐object-constraint-language'><span>6.2.4 ⭐Object Constraint Language </span></h3><p><span>约束可以用自然语言或形式语言(如对象约束语言(OCL) [OMG, 2006])表示。OCL是一种允许在单个模型元素(例如，属性、操作、类)或模型元素组(例如，关联和参与类)上正式指定约束的语言。在接下来的两节中，我们将介绍OCL的基本语法。</span></p><p><span>约束被表示为返回值True或False的布尔表达式。</span></p><p><img src="img/6-2.png" referrerpolicy="no-referrer"></p><p><span>将OCL表达式附加到图表上可能会导致混乱。因此，OCL表达式可以以文本形式表示。例如，Tournament类要求maxNumPlayers属性为正的不变量如下所示:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">context Tournament inv:</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">self.getMaxNumPlayers() &gt; 0</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><p><span>context关键字表示表达式应用的实体。后面跟着一个关键字inv、pre和post，它们分别对应于UML原型«不变式»、«前置条件»和«后置条件»。</span></p><p><span>传递给操作的参数可以作为表达式中的变量使用。例如，考虑Tournament中acceptPlayer()操作的以下前提条件:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">context Tournament::acceptPlayer(p:Player) pre:</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">!isPlayerAccepted(p)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
</body>
</html>